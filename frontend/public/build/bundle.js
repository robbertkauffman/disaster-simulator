var app=function(t){"use strict";function e(){}const r=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let u;function c(t,e){return u||(u=document.createElement("a")),u.href=e,t===u.href}function f(t,r,n){t.$$.on_destroy.push(function(t,...r){if(null==t)return e;const n=t.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}(r,n))}const l="undefined"!=typeof window;let h=l?()=>window.performance.now():()=>Date.now(),p=l?t=>requestAnimationFrame(t):e;const d=new Set;function g(t){d.forEach((e=>{e.c(t)||(d.delete(e),e.f())})),0!==d.size&&p(g)}function y(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function v(t){const e=E("style");return function(t,e){y(t.head||t,e)}(m(t),e),e.sheet}function b(t,e,r){t.insertBefore(e,r||null)}function w(t){t.parentNode.removeChild(t)}function _(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function E(t){return document.createElement(t)}function x(t){return document.createTextNode(t)}function S(){return x(" ")}function O(){return x("")}function $(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function A(t,e,r){null==r?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function j(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function N(t,e){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e)return void(n.selected=!0)}t.selectedIndex=-1}function B(t,e,r){t.classList[r?"add":"remove"](e)}const I=new Map;let R,T=0;function C(t,e,r,n,o,i,s,a=0){const u=16.666/n;let c="{\n";for(let t=0;t<=1;t+=u){const n=e+(r-e)*i(t);c+=100*t+`%{${s(n,1-n)}}\n`}const f=c+`100% {${s(r,1-r)}}\n}`,l=`__svelte_${function(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}(f)}_${a}`,h=m(t),{stylesheet:p,rules:d}=I.get(h)||function(t,e){const r={stylesheet:v(e),rules:{}};return I.set(t,r),r}(h,t);d[l]||(d[l]=!0,p.insertRule(`@keyframes ${l} ${f}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${l} ${n}ms linear ${o}ms 1 both`,T+=1,l}function U(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=r.length-n.length;o&&(t.style.animation=n.join(", "),T-=o,T||p((()=>{T||(I.forEach((t=>{const{stylesheet:e}=t;let r=e.cssRules.length;for(;r--;)e.deleteRule(r);t.rules={}})),I.clear())})))}function P(t){R=t}function M(){if(!R)throw new Error("Function called outside component initialization");return R}function k(t){M().$$.on_mount.push(t)}function L(t){M().$$.after_update.push(t)}function D(t){M().$$.on_destroy.push(t)}const H=[],F=[],q=[],J=[],z=Promise.resolve();let V=!1;function W(t){q.push(t)}function Z(t){J.push(t)}const Y=new Set;let G,K=0;function X(){const t=R;do{for(;K<H.length;){const t=H[K];K++,P(t),Q(t.$$)}for(P(null),H.length=0,K=0;F.length;)F.pop()();for(let t=0;t<q.length;t+=1){const e=q[t];Y.has(e)||(Y.add(e),e())}q.length=0}while(H.length);for(;J.length;)J.pop()();V=!1,Y.clear(),P(t)}function Q(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}function tt(t,e,r){t.dispatchEvent(function(t,e,r=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,r,!1,e),n}(`${e?"intro":"outro"}${r}`))}const et=new Set;let rt;function nt(){rt={r:0,c:[],p:rt}}function ot(){rt.r||i(rt.c),rt=rt.p}function it(t,e){t&&t.i&&(et.delete(t),t.i(e))}function st(t,e,r,n){if(t&&t.o){if(et.has(t))return;et.add(t),rt.c.push((()=>{et.delete(t),n&&(r&&t.d(1),n())})),t.o(e)}}const at={duration:0};function ut(t,n,o){let a,u=n(t,o),c=!0;const f=rt;function l(){const{delay:n=0,duration:o=300,easing:s=r,tick:l=e,css:y}=u||at;y&&(a=C(t,1,0,o,n,s,y));const m=h()+n,v=m+o;W((()=>tt(t,!1,"start"))),function(t){let e;0===d.size&&p(g),new Promise((r=>{d.add(e={c:t,f:r})}))}((e=>{if(c){if(e>=v)return l(0,1),tt(t,!1,"end"),--f.r||i(f.c),!1;if(e>=m){const t=s((e-m)/o);l(1-t,t)}}return c}))}return f.r+=1,s(u)?(G||(G=Promise.resolve(),G.then((()=>{G=null}))),G).then((()=>{u=u(),l()})):l(),{end(e){e&&u.tick&&u.tick(1,0),c&&(a&&U(t,a),c=!1)}}}function ct(t,e,r){const n=t.$$.props[e];void 0!==n&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function ft(t){t&&t.c()}function lt(t,e,r,o){const{fragment:a,on_mount:u,on_destroy:c,after_update:f}=t.$$;a&&a.m(e,r),o||W((()=>{const e=u.map(n).filter(s);c?c.push(...e):i(e),t.$$.on_mount=[]})),f.forEach(W)}function ht(t,e){const r=t.$$;null!==r.fragment&&(i(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function pt(t,e){-1===t.$$.dirty[0]&&(H.push(t),V||(V=!0,z.then(X)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function dt(t,r,n,s,a,u,c,f=[-1]){const l=R;P(t);const h=t.$$={fragment:null,ctx:null,props:u,update:e,not_equal:a,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(l?l.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:r.target||l.$$.root};c&&c(h.root);let p=!1;if(h.ctx=n?n(t,r.props||{},((e,r,...n)=>{const o=n.length?n[0]:r;return h.ctx&&a(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),p&&pt(t,e)),r})):[],h.update(),p=!0,i(h.before_update),h.fragment=!!s&&s(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(w)}else h.fragment&&h.fragment.c();r.intro&&it(t.$$.fragment),lt(t,r.target,r.anchor,r.customElement),X()}P(l)}class gt{$destroy(){ht(this,1),this.$destroy=e}$on(t,e){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const yt=[];function mt(t,r=e){let n;const o=new Set;function i(e){if(a(t,e)&&(t=e,n)){const e=!yt.length;for(const e of o)e[1](),yt.push(e,t);if(e){for(let t=0;t<yt.length;t+=2)yt[t][0](yt[t+1]);yt.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(s,a=e){const u=[s,a];return o.add(u),1===o.size&&(n=r(i)||e),s(t),()=>{o.delete(u),0===o.size&&(n(),n=null)}}}}const vt=mt(!1),bt=mt(!1);function wt(t,e,r){const n=t.slice();return n[5]=e[r],n}function _t(t){let e,r,n,o,i,s=t[0].toUpperCase()+"",a=t[1],u=[];for(let e=0;e<a.length;e+=1)u[e]=Et(wt(t,a,e));return{c(){e=E("div"),r=E("h1"),n=x("App log — "),o=x(s),i=S();for(let t=0;t<u.length;t+=1)u[t].c();A(r,"class","display-6"),A(e,"class","col")},m(t,s){b(t,e,s),y(e,r),y(r,n),y(r,o),y(e,i);for(let t=0;t<u.length;t+=1)u[t].m(e,null)},p(t,r){if(1&r&&s!==(s=t[0].toUpperCase()+"")&&j(o,s),2&r){let n;for(a=t[1],n=0;n<a.length;n+=1){const o=wt(t,a,n);u[n]?u[n].p(o,r):(u[n]=Et(o),u[n].c(),u[n].m(e,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=a.length}},d(t){t&&w(e),_(u,t)}}}function Et(t){let e,r,n,o,i,s,a,u,c,f,l=Os(t[5].ts.$date)+"",h=t[5].operation+"",p=t[5].latency+"";return{c(){e=E("p"),r=E("span"),n=x(l),o=x(":"),i=x(" '"),s=x(h),a=x("' in "),u=x(p),c=x("ms..."),A(e,"class",f="log "+(t[5].success?"text-success":"text-danger")+" svelte-o9crug")},m(t,f){b(t,e,f),y(e,r),y(r,n),y(r,o),y(e,i),y(e,s),y(e,a),y(e,u),y(e,c)},p(t,r){2&r&&l!==(l=Os(t[5].ts.$date)+"")&&j(n,l),2&r&&h!==(h=t[5].operation+"")&&j(s,h),2&r&&p!==(p=t[5].latency+"")&&j(u,p),2&r&&f!==(f="log "+(t[5].success?"text-success":"text-danger")+" svelte-o9crug")&&A(e,"class",f)},d(t){t&&w(e)}}}function xt(t){let r,n=t[1].length>0&&_t(t);return{c(){n&&n.c(),r=O()},m(t,e){n&&n.m(t,e),b(t,r,e)},p(t,[e]){t[1].length>0?n?n.p(t,e):(n=_t(t),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:e,o:e,d(t){n&&n.d(t),t&&w(r)}}}function St(t,e,r){let n,{region:o="REGION"}=e,{appServerEndpoint:i}=e,s=[];async function a(){try{const t=await fetch(i+"/requestlog");r(1,s=await t.json())}catch(t){console.log(`Error while fetching request log: ${t}`)}}return k((()=>{})),D((()=>{clearInterval(n)})),vt.subscribe((t=>{t?n=setInterval(a,1e3):clearInterval(n)})),t.$$set=t=>{"region"in t&&r(0,o=t.region),"appServerEndpoint"in t&&r(2,i=t.appServerEndpoint)},[o,s,i]}class Ot extends gt{constructor(t){super(),dt(this,t,St,xt,a,{region:0,appServerEndpoint:2})}}function $t(t){let r,n,o,i,s,a,u,f,l=t[0].toUpperCase()+"";return{c(){r=E("div"),n=E("figure"),o=E("figcaption"),i=x("App server — "),s=x(l),a=S(),u=E("img"),A(o,"class","figure-caption text-center"),c(u.src,f="img/appserver.png")||A(u,"src","img/appserver.png"),A(u,"class","figure-img svelte-1xxiser"),A(u,"alt","appserver"),A(n,"class","figure"),A(r,"class","col-3 text-center")},m(e,c){b(e,r,c),y(r,n),y(n,o),y(o,i),y(o,s),y(n,a),y(n,u),t[3](u)},p(t,[e]){1&e&&l!==(l=t[0].toUpperCase()+"")&&j(s,l)},i:e,o:e,d(e){e&&w(r),t[3](null)}}}function At(t,e,r){let n,o,{region:i="REGION"}=e,{mongoNodes:s}=e;return L((()=>{!function(){if(s.length>1){const t=s.findIndex((t=>t.connectedToApp));if(-1!==t&&s[t].iconElm){const e=new LeaderLine(n,s[t].iconElm,{color:"#8a795d",startSocket:"bottom",endSocket:"top"});o&&o.remove(),o=e}}}()})),t.$$set=t=>{"region"in t&&r(0,i=t.region),"mongoNodes"in t&&r(2,s=t.mongoNodes)},[i,n,s,function(t){F[t?"unshift":"push"]((()=>{n=t,r(1,n)}))}]}class jt extends gt{constructor(t){super(),dt(this,t,At,$t,a,{region:0,mongoNodes:2})}}for(var Nt=function(t){var e=kt(t),r=e[0],n=e[1];return 3*(r+n)/4-n},Bt=function(t){var e,r,n=kt(t),o=n[0],i=n[1],s=new Ct(function(t,e,r){return 3*(e+r)/4-r}(0,o,i)),a=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)e=Tt[t.charCodeAt(r)]<<18|Tt[t.charCodeAt(r+1)]<<12|Tt[t.charCodeAt(r+2)]<<6|Tt[t.charCodeAt(r+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===i&&(e=Tt[t.charCodeAt(r)]<<2|Tt[t.charCodeAt(r+1)]>>4,s[a++]=255&e);1===i&&(e=Tt[t.charCodeAt(r)]<<10|Tt[t.charCodeAt(r+1)]<<4|Tt[t.charCodeAt(r+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},It=function(t){for(var e,r=t.length,n=r%3,o=[],i=16383,s=0,a=r-n;s<a;s+=i)o.push(Lt(t,s,s+i>a?a:s+i));1===n?(e=t[r-1],o.push(Rt[e>>2]+Rt[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(Rt[e>>10]+Rt[e>>4&63]+Rt[e<<2&63]+"="));return o.join("")},Rt=[],Tt=[],Ct="undefined"!=typeof Uint8Array?Uint8Array:Array,Ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pt=0,Mt=Ut.length;Pt<Mt;++Pt)Rt[Pt]=Ut[Pt],Tt[Ut.charCodeAt(Pt)]=Pt;function kt(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Lt(t,e,r){for(var n,o,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),i.push(Rt[(o=n)>>18&63]+Rt[o>>12&63]+Rt[o>>6&63]+Rt[63&o]);return i.join("")}Tt["-".charCodeAt(0)]=62,Tt["_".charCodeAt(0)]=63;var Dt,Ht,Ft={byteLength:Nt,toByteArray:Bt,fromByteArray:It},qt=function(t,e,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,f=-7,l=r?o-1:0,h=r?-1:1,p=t[e+l];for(l+=h,i=p&(1<<-f)-1,p>>=-f,f+=a;f>0;i=256*i+t[e+l],l+=h,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=n;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),i-=c}return(p?-1:1)*s*Math.pow(2,i-n)},Jt=function(t,e,r,n,o,i){var s,a,u,c=8*i-o-1,f=(1<<c)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(e*u-1)*Math.pow(2,o),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;t[r+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*g},zt=(Dt=function(t,e){var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=i,e.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},e.INSPECT_MAX_BYTES=50;var n=2147483647;function o(t){if(t>n)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return s(t,e,r)}function s(t,e,r){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!i.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|h(t,e),n=o(r),s=n.write(t,e);return s!==r&&(n=n.slice(0,s)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(k(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return c(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if(k(t,ArrayBuffer)||t&&k(t.buffer,ArrayBuffer))return f(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(k(t,SharedArrayBuffer)||t&&k(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return i.from(n,e,r);var s=function(t){if(i.isBuffer(t)){var e=0|l(t.length),r=o(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||L(t.length)?o(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return a(t),o(t<0?0:0|l(t))}function c(t){for(var e=t.length<0?0:0|l(t.length),r=o(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,i.prototype),n}function l(t){if(t>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return 0|t}function h(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||k(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(o)return n?-1:U(t).length;e=(""+e).toLowerCase(),o=!0}}function p(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return O(this,e,r);case"latin1":case"binary":return $(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),L(r=+r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,o);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,o){var i,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var f=-1;for(i=r;i<a;i++)if(c(t,i)===c(e,-1===f?0:i-f)){if(-1===f&&(f=i),i-f+1===u)return f*s}else-1!==f&&(i-=i-f),f=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var l=!0,h=0;h<u;h++)if(c(t,i+h)!==c(e,h)){l=!1;break}if(l)return i}return-1}function m(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;n>i/2&&(n=i/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(L(a))return s;t[r+s]=a}return s}function v(t,e,r,n){return M(U(e,t.length-r),t,r,n)}function b(t,e,r,n){return M(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function w(t,e,r,n){return M(P(e),t,r,n)}function _(t,e,r,n){return M(function(t,e){for(var r,n,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?Ft.fromByteArray(t):Ft.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,s,a,u,c=t[o],f=null,l=c>239?4:c>223?3:c>191?2:1;if(o+l<=r)switch(l){case 1:c<128&&(f=c);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&c)<<6|63&i)>127&&(f=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&c)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(f=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(f=u)}null===f?(f=65533,l=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|1023&f),n.push(f),o+=l}return function(t){var e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}e.kMaxLength=n,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(t,e,r){return s(t,e,r)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?o(t):void 0!==e?"string"==typeof r?o(t).fill(e,r):o(t).fill(e):o(t)}(t,e,r)},i.allocUnsafe=function(t){return u(t)},i.allocUnsafeSlow=function(t){return u(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if(k(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),k(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,o=0,s=Math.min(r,n);o<s;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=i.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var s=t[r];if(k(s,Uint8Array))o+s.length>n.length?i.from(s).copy(n,o):Uint8Array.prototype.set.call(n,s,o);else{if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o)}o+=s.length}return n},i.byteLength=h,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):p.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},r&&(i.prototype[r]=i.prototype.inspect),i.prototype.compare=function(t,e,r,n,o){if(k(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(s,a),c=this.slice(n,o),f=t.slice(e,r),l=0;l<u;++l)if(c[l]!==f[l]){s=c[l],a=f[l];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},i.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},i.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},i.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return v(this,t,e,r);case"ascii":case"latin1":case"binary":return b(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var S=4096;function O(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function $(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=D[t[i]];return o}function j(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,o,s){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function I(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,o){return e=+e,r>>>=0,o||I(t,0,r,4),Jt(t,e,r,n,23,4),r+4}function T(t,e,r,n,o){return e=+e,r>>>=0,o||I(t,0,r,8),Jt(t,e,r,n,52,8),r+8}i.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},i.prototype.readUintBE=i.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},i.prototype.readUint8=i.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},i.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||N(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},i.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),qt(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),qt(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),qt(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),qt(this,t,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||B(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||B(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},i.prototype.writeUint8=i.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,t,e,r,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},i.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var o=Math.pow(2,8*r-1);B(this,t,e,r,o-1,-o)}var i=r-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+r},i.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},i.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},i.prototype.writeDoubleLE=function(t,e,r){return T(this,t,e,!0,r)},i.prototype.writeDoubleBE=function(t,e,r){return T(this,t,e,!1,r)},i.prototype.copy=function(t,e,r,n){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),o},i.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var o=t.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{var a=i.isBuffer(t)?t:i.from(t,n),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=a[s%u]}return this};var C=/[^+/0-9A-Za-z-_]/g;function U(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function P(t){return Ft.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(C,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function M(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}function k(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function L(t){return t!=t}var D=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,o=0;o<16;++o)e[n+o]=t[r]+t[o];return e}()},Dt(Ht={exports:{}},Ht.exports),Ht.exports),Vt=zt.Buffer;
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Wt(t){return t&&t.Math==Math&&t}function Zt(){return Wt("object"==typeof globalThis&&globalThis)||Wt("object"==typeof window&&window)||Wt("object"==typeof self&&self)||Wt("object"==typeof global&&global)||Function("return this")()}zt.SlowBuffer,zt.INSPECT_MAX_BYTES,zt.kMaxLength;var Yt=function(t){var e,r="object"==typeof(e=Zt()).navigator&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=Vt.alloc(t),o=0;o<t;++o)n[o]=Math.floor(256*Math.random());return n},Gt=function(){if("undefined"!=typeof window){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(Vt.alloc(e))}}if("undefined"!=typeof global&&global.crypto&&global.crypto.getRandomValues)return function(t){return global.crypto.getRandomValues(Vt.alloc(t))};var e;try{e=require("crypto").randomBytes}catch(t){}return e||Yt}();function Kt(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function Xt(t){return"object"==typeof t&&null!==t}function Qt(t,e){var r=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return r||(console.warn(e),r=!0),t.apply(this,n)}}function te(t){if(ArrayBuffer.isView(t))return Vt.from(t.buffer,t.byteOffset,t.byteLength);if(e=t,["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e)))return Vt.from(t);var e;throw new TypeError("Must use either Buffer or TypedArray")}var ee=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,re=function(t){return"string"==typeof t&&ee.test(t)},ne=function(t){if(!re(t))throw new TypeError('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return Vt.from(e,"hex")},oe=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},ie=Symbol("id"),se=function(){function t(e){if(void 0===e)this.id=t.generate();else if(e instanceof t)this[ie]=Vt.from(e.id),this.__id=e.__id;else if(ArrayBuffer.isView(e)&&16===e.byteLength)this.id=te(e);else{if("string"!=typeof e)throw new TypeError("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");this.id=ne(e)}}return Object.defineProperty(t.prototype,"id",{get:function(){return this[ie]},set:function(e){this[ie]=e,t.cacheHexString&&(this.__id=oe(e))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(e){if(void 0===e&&(e=!0),t.cacheHexString&&this.__id)return this.__id;var r=oe(this.id,e);return t.cacheHexString&&(this.__id=r),r},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(!e)return!1;if(e instanceof t)return e.id.equals(this.id);try{return new t(e).id.equals(this.id)}catch(t){return!1}},t.prototype.toBinary=function(){return new ae(this.id,ae.SUBTYPE_UUID)},t.generate=function(){var t=Gt(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,Vt.from(t)},t.isValid=function(e){if(!e)return!1;if(e instanceof t)return!0;if("string"==typeof e)return re(e);if(Kt(e)){if(16!==e.length)return!1;try{return parseInt(e[6].toString(16)[0],10)===ae.SUBTYPE_UUID}catch(t){return!1}}return!1},t.createFromHexString=function(e){return new t(ne(e))},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'+this.toHexString()+'")'},t}();Object.defineProperty(se.prototype,"_bsontype",{value:"UUID"});var ae=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new TypeError("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=r?r:t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=Vt.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=Vt.from(e,"binary"):Array.isArray(e)?this.buffer=Vt.from(e):this.buffer=te(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new TypeError("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new TypeError("only accepts single character Uint8Array or Array");var r;if((r="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||r>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=Vt.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var r=Vt.alloc(this.buffer.length+t.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r}ArrayBuffer.isView(t)?(this.buffer.set(te(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),r=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===r.length?"0"+r:r}:{$binary:{base64:e,subType:1===r.length?"0"+r:r}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new se(this.buffer.slice(0,this.position));throw new Error('Binary sub_type "'+this.sub_type+'" is not supported for converting to UUID. Only "'+t.SUBTYPE_UUID+'" is currently supported.')},t.fromExtendedJSON=function(e,r){var n,o;if(r=r||{},"$binary"in e?r.legacy&&"string"==typeof e.$binary&&"$type"in e?(o=e.$type?parseInt(e.$type,16):0,n=Vt.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(o=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=Vt.from(e.$binary.base64,"base64")):"$uuid"in e&&(o=4,n=ne(e.$uuid)),!n)throw new TypeError("Unexpected Binary Extended JSON format "+JSON.stringify(e));return new t(n,o)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Binary(Buffer.from("'+this.value(!0).toString("hex")+'", "hex"), '+this.sub_type+")"},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(ae.prototype,"_bsontype",{value:"Binary"});var ue=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'+t.code+'"'+(t.scope?", "+JSON.stringify(t.scope):"")+")"},t}();Object.defineProperty(ue.prototype,"_bsontype",{value:"Code"});var ce=function(){function t(e,r,n,o){if(!(this instanceof t))return new t(e,r,n,o);var i=e.split(".");2===i.length&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=o||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy?e:(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields))},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'+this.namespace+'", new ObjectId("'+t+'")'+(this.db?', "'+this.db+'"':"")+")"},t}();Object.defineProperty(ce.prototype,"_bsontype",{value:"DBRef"});var fe=void 0;try{fe=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}var le=4294967296,he=0x10000000000000000,pe=he/2,de={},ge={},ye=function(){function t(e,r,n){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,r,n);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!r)):"string"==typeof e?Object.assign(this,t.fromString(e,!!r)):(this.low=0|e,this.high=0|r,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,o,i;return r?(i=0<=(e>>>=0)&&e<256)&&(o=ge[e])?o:(n=t.fromBits(e,(0|e)<0?-1:0,!0),i&&(ge[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(o=de[e])?o:(n=t.fromBits(e,e<0?-1:0,!1),i&&(de[e]=n),n)},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=he)return t.MAX_UNSIGNED_VALUE}else{if(e<=-pe)return t.MIN_VALUE;if(e+1>=pe)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%le|0,e/le|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof r?(n=r,r=!1):r=!!r,(n=n||10)<2||36<n)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return t.fromString(e.substring(1),r,n).neg();for(var i=t.fromNumber(Math.pow(n,8)),s=t.ZERO,a=0;a<e.length;a+=8){var u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){var f=t.fromNumber(Math.pow(n,u));s=s.mul(f).add(t.fromNumber(c))}else s=(s=s.mul(i)).add(t.fromNumber(c))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(t){return Xt(t)&&!0===t.__isLong__},t.fromValue=function(e,r){return"number"==typeof e?t.fromNumber(e,r):"string"==typeof e?t.fromString(e,r):t.fromBits(e.low,e.high,"boolean"==typeof r?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,u=e.low>>>16,c=0,f=0,l=0,h=0;return l+=(h+=i+(65535&e.low))>>>16,h&=65535,f+=(l+=o+u)>>>16,l&=65535,c+=(f+=n+a)>>>16,f&=65535,c+=r+s,c&=65535,t.fromBits(l<<16|h,c<<16|f,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(fe){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var r=(this.unsigned?fe.div_u:fe.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,fe.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(n=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(o=this.sub(e.mul(n)),i=n.add(o.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),a=s<=48?1:Math.pow(2,s-48),u=t.fromNumber(n),c=u.mul(e);c.isNegative()||c.gt(o);)n-=a,c=(u=t.fromNumber(n,this.unsigned)).mul(e);u.isZero()&&(u=t.ONE),i=i.add(u),o=o.sub(c)}return i},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,r=0!==this.high?this.high:this.low;for(e=31;e>0&&0==(r&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),fe){var r=(this.unsigned?fe.rem_u:fe.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,fe.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),fe){var r=fe.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,fe.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,u=65535&e.high,c=e.low>>>16,f=65535&e.low,l=0,h=0,p=0,d=0;return p+=(d+=s*f)>>>16,d&=65535,h+=(p+=i*f)>>>16,p&=65535,h+=(p+=s*c)>>>16,p&=65535,l+=(h+=o*f)>>>16,h&=65535,l+=(h+=i*c)>>>16,h&=65535,l+=(h+=s*u)>>>16,h&=65535,l+=n*f+o*c+i*u+s*a,l&=65535,t.fromBits(p<<16|d,l<<16|h,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}return 32===e?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*le+(this.low>>>0):this.high*le+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),o=n.mul(r).sub(this);return n.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,a="";;){var u=s.div(i),c=(s.sub(u.mul(i)).toInt()>>>0).toString(e);if((s=u).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'+this.toString()+'"'+(this.unsigned?", true":"")+")"},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(ye.prototype,"__isLong__",{value:!0}),Object.defineProperty(ye.prototype,"_bsontype",{value:"Long"});var me=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,ve=/^(\+|-)?(Infinity|inf)$/i,be=/^(\+|-)?NaN$/i,we=6111,_e=-6176,Ee=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),xe=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Se=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Oe=/^([-+])?(\d+)?$/;function $e(t){return!isNaN(parseInt(t,10))}function Ae(t){var e=ye.fromNumber(1e9),r=ye.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=(r=r.shiftLeft(32)).add(new ye(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function je(t,e){throw new TypeError('"'+t+'" is not a valid Decimal128 string - '+e)}var Ne=function(){function t(e){if(!(this instanceof t))return new t(e);this.bytes="string"==typeof e?t.fromString(e).bytes:e}return t.fromString=function(e){var r,n=!1,o=!1,i=!1,s=0,a=0,u=0,c=0,f=0,l=[0],h=0,p=0,d=0,g=0,y=0,m=0,v=new ye(0,0),b=new ye(0,0),w=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var _=e.match(me),E=e.match(ve),x=e.match(be);if(!_&&!E&&!x||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(_){var S=_[2],O=_[4],$=_[5],A=_[6];O&&void 0===A&&je(e,"missing exponent power"),O&&void 0===S&&je(e,"missing exponent base"),void 0===O&&($||A)&&je(e,"missing e before exponent")}if("+"!==e[w]&&"-"!==e[w]||(n="-"===e[w++]),!$e(e[w])&&"."!==e[w]){if("i"===e[w]||"I"===e[w])return new t(Vt.from(n?xe:Se));if("N"===e[w])return new t(Vt.from(Ee))}for(;$e(e[w])||"."===e[w];)"."!==e[w]?(h<34&&("0"!==e[w]||i)&&(i||(f=a),i=!0,l[p++]=parseInt(e[w],10),h+=1),i&&(u+=1),o&&(c+=1),a+=1,w+=1):(o&&je(e,"contains multiple periods"),o=!0,w+=1);if(o&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[w]||"E"===e[w]){var j=e.substr(++w).match(Oe);if(!j||!j[2])return new t(Vt.from(Ee));y=parseInt(j[0],10),w+=j[0].length}if(e[w])return new t(Vt.from(Ee));if(d=0,h){if(g=h-1,1!==(s=u))for(;0===l[f+s-1];)s-=1}else d=0,g=0,l[0]=0,u=1,h=1,s=0;for(y<=c&&c-y>16384?y=_e:y-=c;y>we;){if((g+=1)-d>34){if(l.join("").match(/^0+$/)){y=we;break}je(e,"overflow")}y-=1}for(;y<_e||h<u;){if(0===g&&s<h){y=_e,s=0;break}if(h<u?u-=1:g-=1,y<we)y+=1;else{if(l.join("").match(/^0+$/)){y=we;break}je(e,"overflow")}}if(g-d+1<s){var N=a;o&&(f+=1,N+=1),n&&(f+=1,N+=1);var B=parseInt(e[f+g+1],10),I=0;if(B>=5&&(I=1,5===B))for(I=l[g]%2==1?1:0,m=f+g+2;m<N;m++)if(parseInt(e[m],10)){I=1;break}if(I)for(var R=g;R>=0;R--)if(++l[R]>9&&(l[R]=0,0===R)){if(!(y<we))return new t(Vt.from(n?xe:Se));y+=1,l[R]=1}}if(v=ye.fromNumber(0),b=ye.fromNumber(0),0===s)v=ye.fromNumber(0),b=ye.fromNumber(0);else if(g-d<17){R=d;for(b=ye.fromNumber(l[R++]),v=new ye(0,0);R<=g;R++)b=(b=b.multiply(ye.fromNumber(10))).add(ye.fromNumber(l[R]))}else{R=d;for(v=ye.fromNumber(l[R++]);R<=g-17;R++)v=(v=v.multiply(ye.fromNumber(10))).add(ye.fromNumber(l[R]));for(b=ye.fromNumber(l[R++]);R<=g;R++)b=(b=b.multiply(ye.fromNumber(10))).add(ye.fromNumber(l[R]))}var T,C,U,P,M=function(t,e){if(!t&&!e)return{high:ye.fromNumber(0),low:ye.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new ye(t.getLowBits(),0),o=e.shiftRightUnsigned(32),i=new ye(e.getLowBits(),0),s=r.multiply(o),a=r.multiply(i),u=n.multiply(o),c=n.multiply(i);return s=s.add(a.shiftRightUnsigned(32)),a=new ye(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),{high:s=s.add(a.shiftRightUnsigned(32)),low:c=a.shiftLeft(32).add(new ye(c.getLowBits(),0))}}(v,ye.fromString("100000000000000000"));M.low=M.low.add(b),T=M.low,C=b,U=T.high>>>0,P=C.high>>>0,(U<P||U===P&&T.low>>>0<C.low>>>0)&&(M.high=M.high.add(ye.fromNumber(1))),r=y+6176;var k={low:ye.fromNumber(0),high:ye.fromNumber(0)};M.high.shiftRightUnsigned(49).and(ye.fromNumber(1)).equals(ye.fromNumber(1))?(k.high=k.high.or(ye.fromNumber(3).shiftLeft(61)),k.high=k.high.or(ye.fromNumber(r).and(ye.fromNumber(16383).shiftLeft(47))),k.high=k.high.or(M.high.and(ye.fromNumber(0x7fffffffffff)))):(k.high=k.high.or(ye.fromNumber(16383&r).shiftLeft(49)),k.high=k.high.or(M.high.and(ye.fromNumber(562949953421311)))),k.low=M.low,n&&(k.high=k.high.or(ye.fromString("9223372036854775808")));var L=Vt.alloc(16);return w=0,L[w++]=255&k.low.low,L[w++]=k.low.low>>8&255,L[w++]=k.low.low>>16&255,L[w++]=k.low.low>>24&255,L[w++]=255&k.low.high,L[w++]=k.low.high>>8&255,L[w++]=k.low.high>>16&255,L[w++]=k.low.high>>24&255,L[w++]=255&k.high.low,L[w++]=k.high.low>>8&255,L[w++]=k.high.low>>16&255,L[w++]=k.high.low>>24&255,L[w++]=255&k.high.high,L[w++]=k.high.high>>8&255,L[w++]=k.high.high>>16&255,L[w++]=k.high.high>>24&255,new t(L)},t.prototype.toString=function(){for(var t,e=0,r=new Array(36),n=0;n<r.length;n++)r[n]=0;var o,i,s,a=0,u=!1,c={parts:[0,0,0,0]},f=[];a=0;var l=this.bytes,h=l[a++]|l[a++]<<8|l[a++]<<16|l[a++]<<24,p=l[a++]|l[a++]<<8|l[a++]<<16|l[a++]<<24,d=l[a++]|l[a++]<<8|l[a++]<<16|l[a++]<<24,g=l[a++]|l[a++]<<8|l[a++]<<16|l[a++]<<24;a=0,{low:new ye(h,p),high:new ye(d,g)}.high.lessThan(ye.ZERO)&&f.push("-");var y=g>>26&31;if(y>>3==3){if(30===y)return f.join("")+"Infinity";if(31===y)return"NaN";t=g>>15&16383,o=8+(g>>14&1)}else o=g>>14&7,t=g>>17&16383;var m=t-6176;if(c.parts[0]=(16383&g)+((15&o)<<14),c.parts[1]=d,c.parts[2]=p,c.parts[3]=h,0===c.parts[0]&&0===c.parts[1]&&0===c.parts[2]&&0===c.parts[3])u=!0;else for(s=3;s>=0;s--){var v=0,b=Ae(c);if(c=b.quotient,v=b.rem.low)for(i=8;i>=0;i--)r[9*s+i]=v%10,v=Math.floor(v/10)}if(u)e=1,r[a]=0;else for(e=36;!r[a];)e-=1,a+=1;var w=e-1+m;if(w>=34||w<=-7||m>0){if(e>34)return f.push("0"),m>0?f.push("E+"+m):m<0&&f.push("E"+m),f.join("");f.push(""+r[a++]),(e-=1)&&f.push(".");for(n=0;n<e;n++)f.push(""+r[a++]);f.push("E"),w>0?f.push("+"+w):f.push(""+w)}else if(m>=0)for(n=0;n<e;n++)f.push(""+r[a++]);else{var _=e+m;if(_>0)for(n=0;n<_;n++)f.push(""+r[a++]);else f.push("0");for(f.push(".");_++<0;)f.push("0");for(n=0;n<e-Math.max(_-1,0);n++)f.push(""+r[a++])}return f.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'+this.toString()+'")'},t}();Object.defineProperty(Ne.prototype,"_bsontype",{value:"Decimal128"});var Be=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-"+this.value.toFixed(1)}:(Number.isInteger(this.value)?(e=this.value.toFixed(1)).length>=13&&(e=this.value.toExponential(13).toUpperCase()):e=this.value.toString(),{$numberDouble:e});var e},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Double("+this.toExtendedJSON().$numberDouble+")"},t}();Object.defineProperty(Be.prototype,"_bsontype",{value:"Double"});var Ie=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32("+this.valueOf()+")"},t}();Object.defineProperty(Ie.prototype,"_bsontype",{value:"Int32"});var Re=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(Re.prototype,"_bsontype",{value:"MaxKey"});var Te=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(Te.prototype,"_bsontype",{value:"MinKey"});var Ce=new RegExp("^[0-9a-fA-F]{24}$"),Ue=null,Pe=Symbol("id"),Me=function(){function t(e){if(!(this instanceof t))return new t(e);if(e instanceof t&&(this[Pe]=e.id,this.__id=e.__id),"object"==typeof e&&e&&"id"in e&&("toHexString"in e&&"function"==typeof e.toHexString?this[Pe]=Vt.from(e.toHexString(),"hex"):this[Pe]="string"==typeof e.id?Vt.from(e.id):e.id),null!=e&&"number"!=typeof e||(this[Pe]=t.generate("number"==typeof e?e:void 0),t.cacheHexString&&(this.__id=this.id.toString("hex"))),ArrayBuffer.isView(e)&&12===e.byteLength&&(this[Pe]=te(e)),"string"==typeof e)if(12===e.length){var r=Vt.from(e);12===r.byteLength&&(this[Pe]=r)}else{if(24!==e.length||!Ce.test(e))throw new TypeError("Argument passed in must be a Buffer or string of 12 bytes or a string of 24 hex characters");this[Pe]=Vt.from(e,"hex")}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Pe]},set:function(e){this[Pe]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=~~(Date.now()/1e3));var r=t.getInc(),n=Vt.alloc(12);return n.writeUInt32BE(e,0),null===Ue&&(Ue=Gt(5)),n[4]=Ue[0],n[5]=Ue[1],n[6]=Ue[2],n[7]=Ue[3],n[8]=Ue[4],n[11]=255&r,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){return null!=e&&(e instanceof t?this.toString()===e.toString():"string"==typeof e&&t.isValid(e)&&12===e.length&&Kt(this.id)?e===Vt.prototype.toString.call(this.id,"latin1"):"string"==typeof e&&t.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"==typeof e&&t.isValid(e)&&12===e.length?Vt.from(e).equals(this.id):"object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString&&e.toHexString()===this.toHexString())},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var r=Vt.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(Vt.from(e,"hex"))},t.isValid=function(e){return null!=e&&("number"==typeof e||("string"==typeof e?12===e.length||24===e.length&&Ce.test(e):e instanceof t||(!(!Kt(e)||12!==e.length)||"object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString&&("string"==typeof e.id?12===e.id.length:24===e.toHexString().length&&Ce.test(e.id.toString("hex"))))))},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'+this.toHexString()+'")'},t.index=~~(16777215*Math.random()),t}();Object.defineProperty(Me.prototype,"generate",{value:Qt((function(t){return Me.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(Me.prototype,"getInc",{value:Qt((function(){return Me.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Me.prototype,"get_inc",{value:Qt((function(){return Me.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Me,"get_inc",{value:Qt((function(){return Me.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(Me.prototype,"_bsontype",{value:"ObjectID"});var ke=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.pattern=e,this.options=(null!=r?r:"").split("").sort().join("");for(var n=0;n<this.options.length;n++)if("i"!==this.options[n]&&"m"!==this.options[n]&&"x"!==this.options[n]&&"l"!==this.options[n]&&"s"!==this.options[n]&&"u"!==this.options[n])throw new Error("The regular expression option ["+this.options[n]+"] is not supported")}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new TypeError("Unexpected BSONRegExp EJSON object form: "+JSON.stringify(e))},t}();Object.defineProperty(ke.prototype,"_bsontype",{value:"BSONRegExp"});var Le=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'+this.value+'")'},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(Le.prototype,"_bsontype",{value:"Symbol"});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var De=function(t,e){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},De(t,e)};var He=function(t){function e(r,n){var o=this;return o instanceof e?(o=ye.isLong(r)?t.call(this,r.low,r.high,!0)||this:Xt(r)&&void 0!==r.t&&void 0!==r.i?t.call(this,r.i,r.t,!0)||this:t.call(this,r,n,!0)||this,Object.defineProperty(o,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),o):new e(r,n)}return function(t,e){function r(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(ye.fromInt(t,!0))},e.fromNumber=function(t){return new e(ye.fromNumber(t,!0))},e.fromBits=function(t,r){return new e(t,r)},e.fromString=function(t,r){return new e(ye.fromString(t,!0,r))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: "+this.getHighBits()+", i: "+this.getLowBits()+" })"},e.MAX_VALUE=ye.MAX_UNSIGNED_VALUE,e}(ye);var Fe=2147483647,qe=-2147483648,Je=0x8000000000000000,ze=-0x8000000000000000,Ve={$oid:Me,$binary:ae,$uuid:ae,$symbol:Le,$numberInt:Ie,$numberDecimal:Ne,$numberDouble:Be,$numberLong:ye,$minKey:Te,$maxKey:Re,$regex:ke,$regularExpression:ke,$timestamp:He};function We(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=qe&&t<=Fe)return new Ie(t);if(t>=ze&&t<=Je)return ye.fromNumber(t)}return new Be(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),n=0;n<r.length;n++){var o=Ve[r[n]];if(o)return o.fromExtendedJSON(t,e)}if(null!=t.$date){var i=t.$date,s=new Date;return e.legacy?"number"==typeof i?s.setTime(i):"string"==typeof i&&s.setTime(Date.parse(i)):"string"==typeof i?s.setTime(Date.parse(i)):ye.isLong(i)?s.setTime(i.toNumber()):"number"==typeof i&&e.relaxed&&s.setTime(i),s}if(null!=t.$code){var a=Object.assign({},t);return t.$scope&&(a.$scope=We(t.$scope)),ue.fromExtendedJSON(t)}if(function(t){return Xt(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}(t)||t.$dbPointer){var u=t.$ref?t:t.$dbPointer;if(u instanceof ce)return u;var c=Object.keys(u).filter((function(t){return t.startsWith("$")})),f=!0;if(c.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(f=!1)})),f)return ce.fromExtendedJSON(u)}return t}function Ze(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function Ye(t,e){if(("object"==typeof t||"function"==typeof t)&&null!==t){var r=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==r){var n=e.seenObjects.map((function(t){return t.propertyName})),o=n.slice(0,r).map((function(t){return t+" -> "})).join(""),i=n[r],s=" -> "+n.slice(r+1,n.length-1).map((function(t){return t+" -> "})).join(""),a=n[n.length-1],u=" ".repeat(o.length+i.length/2),c="-".repeat(s.length+(i.length+a.length)/2-1);throw new TypeError("Converting circular structure to EJSON:\n    "+o+i+s+a+"\n    "+u+"\\"+c+"/")}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,r){e.seenObjects.push({propertyName:"index "+r,obj:null});try{return Ye(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||function(t){return Xt(t)&&"[object Date]"===Object.prototype.toString.call(t)}(t)){var f=t.getTime(),l=f>-1&&f<2534023188e5;return e.legacy?e.relaxed&&l?{$date:t.getTime()}:{$date:Ze(t)}:e.relaxed&&l?{$date:Ze(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var h=t>=ze&&t<=Je;if(t>=qe&&t<=Fe)return{$numberInt:t.toString()};if(h)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}(t)){var p=t.flags;if(void 0===p){var d=t.toString().match(/[gimuy]*$/);d&&(p=d[0])}return new ke(t.source,p).toExtendedJSON(e)}return null!=t&&"object"==typeof t?function(t,e){if(null==t||"object"!=typeof t)throw new Error("not an object instance");var r=t._bsontype;if(void 0===r){var n={};for(var o in t){e.seenObjects.push({propertyName:o,obj:null});try{n[o]=Ye(t[o],e)}finally{e.seenObjects.pop()}}return n}if(function(t){return Xt(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}(t)){var i=t;if("function"!=typeof i.toExtendedJSON){var s=Ke[t._bsontype];if(!s)throw new TypeError("Unrecognized or invalid _bsontype: "+t._bsontype);i=s(i)}return"Code"===r&&i.scope?i=new ue(i.code,Ye(i.scope,e)):"DBRef"===r&&i.oid&&(i=new ce(Ye(i.collection,e),Ye(i.oid,e),Ye(i.db,e),Ye(i.fields,e))),i.toExtendedJSON(e)}throw new Error("_bsontype must be a string, but was: "+typeof r)}(t,e):t}var Ge,Ke={Binary:function(t){return new ae(t.value(),t.sub_type)},Code:function(t){return new ue(t.code,t.scope)},DBRef:function(t){return new ce(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new Ne(t.bytes)},Double:function(t){return new Be(t.value)},Int32:function(t){return new Ie(t.value)},Long:function(t){return ye.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new Re},MinKey:function(){return new Te},ObjectID:function(t){return new Me(t)},ObjectId:function(t){return new Me(t)},BSONRegExp:function(t){return new ke(t.pattern,t.options)},Symbol:function(t){return new Le(t.value)},Timestamp:function(t){return He.fromBits(t.low,t.high)}};!function(t){function e(t,e){var r=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof r.relaxed&&(r.strict=!r.relaxed),"boolean"==typeof r.strict&&(r.relaxed=!r.strict),JSON.parse(t,(function(t,e){return We(e,r)}))}function r(t,e,r,n){null!=r&&"object"==typeof r&&(n=r,r=0),null==e||"object"!=typeof e||Array.isArray(e)||(n=e,e=void 0,r=0);var o=Ye(t,Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(o,e,r)}t.parse=e,t.stringify=r,t.serialize=function(t,e){return e=e||{},JSON.parse(r(t,e))},t.deserialize=function(t,r){return r=r||{},e(JSON.stringify(t),r)}}(Ge||(Ge={})),Zt().Map||function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var r=t[e],n=r[0],o=r[1];this._keys.push(n),this._values[n]={v:o,i:this._keys.length-1}}}t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?[r,t._values[r].v]:void 0,done:void 0===r}}}},t.prototype.forEach=function(t,e){e=e||this;for(var r=0;r<this._keys.length;r++){var n=this._keys[r];t.call(e,this._values[n].v,n,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?r:void 0,done:void 0===r}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var r=t._keys[e++];return{value:void 0!==r?t._values[r].v:void 0,done:void 0===r}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0})}();var Xe=Math.pow(2,53),Qe=-Math.pow(2,53);ye.fromNumber(Xe),ye.fromNumber(Qe);Vt.alloc(17825792);var tr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function er(t){var e={exports:{}};return t(e,e.exports),e.exports}var rr=er((function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.ChattyClientMessages||(e.ChattyClientMessages={}))[r.Syn=0]="Syn",r[r.Ack=1]="Ack",r[r.Message=2]="Message",r[r.MessageWithResponse=3]="MessageWithResponse",r[r.Response=4]="Response",r[r.ResponseError=5]="ResponseError"})),nr=er((function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.ChattyHostMessages||(e.ChattyHostMessages={}))[r.SynAck=0]="SynAck",r[r.Message=1]="Message",r[r.MessageWithResponse=2]="MessageWithResponse",r[r.Response=3]="Response",r[r.ResponseError=4]="ResponseError"})),or=er((function(t,e){t.exports=function(){function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,o=void 0,i=void 0,s=function(t,e){b[n]=t,b[n+1]=e,2===(n+=2)&&(i?i(w):E())};function a(t){i=t}function u(t){s=t}var c="undefined"!=typeof window?window:void 0,f=c||{},l=f.MutationObserver||f.WebKitMutationObserver,h="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),p="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){return function(){return process.nextTick(w)}}function g(){return void 0!==o?function(){o(w)}:v()}function y(){var t=0,e=new l(w),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function m(){var t=new MessageChannel;return t.port1.onmessage=w,function(){return t.port2.postMessage(0)}}function v(){var t=setTimeout;return function(){return t(w,1)}}var b=new Array(1e3);function w(){for(var t=0;t<n;t+=2)(0,b[t])(b[t+1]),b[t]=void 0,b[t+1]=void 0;n=0}function _(){try{var t=Function("return this")().require("vertx");return o=t.runOnLoop||t.runOnContext,g()}catch(t){return v()}}var E=void 0;function x(t,e){var r=this,n=new this.constructor($);void 0===n[O]&&V(n);var o=r._state;if(o){var i=arguments[o-1];s((function(){return F(o,n,i,r._result)}))}else D(r,n,t,e);return n}function S(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e($);return P(r,t),r}E=h?d():l?y():p?m():void 0===c?_():v();var O=Math.random().toString(36).substring(2);function $(){}var A=void 0,j=1,N=2;function B(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function R(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function T(t,e,r){s((function(t){var n=!1,o=R(r,e,(function(r){n||(n=!0,e!==r?P(t,r):k(t,r))}),(function(e){n||(n=!0,L(t,e))}),"Settle: "+(t._label||" unknown promise"));!n&&o&&(n=!0,L(t,o))}),t)}function C(t,e){e._state===j?k(t,e._result):e._state===N?L(t,e._result):D(e,void 0,(function(e){return P(t,e)}),(function(e){return L(t,e)}))}function U(t,r,n){r.constructor===t.constructor&&n===x&&r.constructor.resolve===S?C(t,r):void 0===n?k(t,r):e(n)?T(t,r,n):k(t,r)}function P(e,r){if(e===r)L(e,B());else if(t(r)){var n=void 0;try{n=r.then}catch(t){return void L(e,t)}U(e,r,n)}else k(e,r)}function M(t){t._onerror&&t._onerror(t._result),H(t)}function k(t,e){t._state===A&&(t._result=e,t._state=j,0!==t._subscribers.length&&s(H,t))}function L(t,e){t._state===A&&(t._state=N,t._result=e,s(M,t))}function D(t,e,r,n){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+j]=r,o[i+N]=n,0===i&&t._state&&s(H,t)}function H(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)n=e[s],o=e[s+r],n?F(r,n,o,i):o(i);t._subscribers.length=0}}function F(t,r,n,o){var i=e(n),s=void 0,a=void 0,u=!0;if(i){try{s=n(o)}catch(t){u=!1,a=t}if(r===s)return void L(r,I())}else s=o;r._state!==A||(i&&u?P(r,s):!1===u?L(r,a):t===j?k(r,s):t===N&&L(r,s))}function q(t,e){try{e((function(e){P(t,e)}),(function(e){L(t,e)}))}catch(e){L(t,e)}}var J=0;function z(){return J++}function V(t){t[O]=J++,t._state=void 0,t._result=void 0,t._subscribers=[]}function W(){return new Error("Array Methods must be provided an Array")}var Z=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t($),this.promise[O]||V(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?k(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&k(this.promise,this._result))):L(this.promise,W())}return t.prototype._enumerate=function(t){for(var e=0;this._state===A&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===S){var o=void 0,i=void 0,s=!1;try{o=t.then}catch(t){s=!0,i=t}if(o===x&&t._state!==A)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(r===tt){var a=new r($);s?L(a,i):U(a,t,o),this._willSettleAt(a,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===A&&(this._remaining--,t===N?L(n,r):this._result[e]=r),0===this._remaining&&k(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;D(t,void 0,(function(t){return r._settledAt(j,e,t)}),(function(t){return r._settledAt(N,e,t)}))},t}();function Y(t){return new Z(this,t).promise}function G(t){var e=this;return r(t)?new e((function(r,n){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function K(t){var e=new this($);return L(e,t),e}function X(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var tt=function(){function t(e){this[O]=z(),this._result=this._state=void 0,this._subscribers=[],$!==e&&("function"!=typeof e&&X(),this instanceof t?q(this,e):Q())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();function et(){var t=void 0;if(void 0!==tr)t=tr;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=tt}return tt.prototype.then=x,tt.all=Y,tt.race=G,tt.resolve=S,tt.reject=K,tt._setScheduler=a,tt._setAsap=u,tt._asap=s,tt.polyfill=et,tt.Promise=tt,tt}()}));or.polyfill();var ir=1e3,sr=60*ir,ar=60*sr,ur=24*ar,cr=365.25*ur,fr=function(t,e){e=e||{};var r=typeof t;if("string"===r&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*cr;case"days":case"day":case"d":return r*ur;case"hours":case"hour":case"hrs":case"hr":case"h":return r*ar;case"minutes":case"minute":case"mins":case"min":case"m":return r*sr;case"seconds":case"second":case"secs":case"sec":case"s":return r*ir;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(t);if("number"===r&&!1===isNaN(t))return e.long?function(t){return lr(t,ur,"day")||lr(t,ar,"hour")||lr(t,sr,"minute")||lr(t,ir,"second")||t+" ms"}(t):function(t){if(t>=ur)return Math.round(t/ur)+"d";if(t>=ar)return Math.round(t/ar)+"h";if(t>=sr)return Math.round(t/sr)+"m";if(t>=ir)return Math.round(t/ir)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function lr(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var hr=er((function(t,e){var r;function n(t){function n(){if(n.enabled){var t=n,o=+new Date,i=o-(r||o);t.diff=i,t.prev=r,t.curr=o,r=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=e.formatters[n];if("function"==typeof o){var i=s[u];r=o.call(t,i),s.splice(u,1),u--}return r})),e.formatArgs.call(t,s);var c=n.log||e.log||console.log.bind(console);c.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(t=r[o].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=fr,e.names=[],e.skips=[],e.formatters={}})),pr=er((function(t,e){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=hr).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(o++,"%c"===t&&(i=o))})),t.splice(i,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())})),dr=er((function(t,e){var r,n=tr&&tr.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=tr&&tr.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=tr&&tr.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Connecting=0]="Connecting",t[t.Syn=1]="Syn",t[t.Connected=2]="Connected"}(r=e.ChattyClientStates||(e.ChattyClientStates={}));var s=function(){function t(t){this._clientWindow=window,this._connection=null,this._hostWindow=this._clientWindow.parent,this._state=r.Connecting,this._sequence=0,this._receivers={},this._handlers=t.handlers,this._targetOrigin=t.targetOrigin,this._defaultTimeout=t.defaultTimeout,this._channel=new MessageChannel}return Object.defineProperty(t.prototype,"connection",{get:function(){return this._connection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._state===r.Connected},enumerable:!0,configurable:!0}),t.prototype.connect=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(n){return this._connection||(this._connection=new Promise((function(n,s){e._channel.port1.onmessage=function(s){switch(t._debug("received",s.data.action,s.data.data),s.data.action){case nr.ChattyHostMessages.SynAck:e._state=r.Connected,e.sendMsg(rr.ChattyClientMessages.Ack),n({send:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.sendMsg(rr.ChattyClientMessages.Message,{eventName:t,payload:r})},sendAndReceive:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return o(e,void 0,void 0,(function(){var e,n=this;return i(this,(function(o){return e=++this._sequence,this.sendMsg(rr.ChattyClientMessages.MessageWithResponse,{eventName:t,payload:r},e),[2,new Promise((function(t,r){var o;n._defaultTimeout>-1&&(o=setTimeout((function(){delete n._receivers[e],r(new Error("Timeout"))}),n._defaultTimeout)),n._receivers[e]={resolve:t,reject:r,timeoutId:o}}))]}))}))}});break;case nr.ChattyHostMessages.Message:e._handlers[s.data.data.eventName]&&e._handlers[s.data.data.eventName].forEach((function(t){return t.apply(e,s.data.data.payload)}));break;case nr.ChattyHostMessages.MessageWithResponse:var a=s.data.data,u=a.eventName,c=a.payload,f=a.sequence,l=[];e._handlers[u]&&(l=e._handlers[u].map((function(t){return t.apply(e,c)}))),Promise.all(l).then((function(t){e.sendMsg(rr.ChattyClientMessages.Response,{eventName:u,payload:t},f)})).catch((function(t){e.sendMsg(rr.ChattyClientMessages.ResponseError,{eventName:u,payload:t.toString()},f)}));break;case nr.ChattyHostMessages.Response:var h=e._receivers[s.data.data.sequence];h&&(delete e._receivers[s.data.data.sequence],h.timeoutId&&clearTimeout(h.timeoutId),h.resolve(s.data.data.payload));break;case nr.ChattyHostMessages.ResponseError:var p=e._receivers[s.data.data.sequence];p&&(delete e._receivers[s.data.data.sequence],p.timeoutId&&clearTimeout(p.timeoutId),p.reject("string"==typeof s.data.data.payload?new Error(s.data.data.payload):s.data.data.payload))}},e.initiateHandshake()}))),[2,this._connection]}))}))},t.prototype.initiateHandshake=function(){t._debug("connecting to",this._targetOrigin),this._hostWindow.postMessage({action:rr.ChattyClientMessages.Syn},this._targetOrigin,[this._channel.port2]),this._state=r.Syn},t.prototype.sendMsg=function(e,r,o){void 0===r&&(r={});var i=o?{sequence:o}:{},s=n(n({},r),i);t._debug("sending",e,s),this._channel.port1.postMessage({action:e,data:s})},t._debug=pr("looker:chatty:client"),t}();e.ChattyClient=s})),gr=function(){function t(){this._targetOrigin="*",this._handlers={},this._defaultTimeout=3e4}return Object.defineProperty(t.prototype,"targetOrigin",{get:function(){return this._targetOrigin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handlers",{get:function(){return this._handlers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTimeout",{get:function(){return this._defaultTimeout},enumerable:!0,configurable:!0}),t.prototype.off=function(t,e){this._handlers[t]&&(this._handlers[t]=this._handlers[t].filter((function(t){return t!==e})))},t.prototype.on=function(t,e){return this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e),this},t.prototype.withDefaultTimeout=function(t){return this._defaultTimeout=t,this},t.prototype.withTargetOrigin=function(t){return this._targetOrigin=t,this},t.prototype.build=function(){return new dr.ChattyClient(this)},t}(),yr=gr,mr=Object.defineProperty({ChattyClientBuilder:yr},"__esModule",{value:!0}),vr=er((function(t,e){var r,n=tr&&tr.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n.apply(this,arguments)},o=tr&&tr.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function s(t){try{u(n.next(t))}catch(t){i(t)}}function a(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}u((n=n.apply(t,e||[])).next())}))},i=tr&&tr.__generator||function(t,e){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.Connecting=0]="Connecting",t[t.SynAck=1]="SynAck",t[t.Connected=2]="Connected"}(r=e.ChattyHostStates||(e.ChattyHostStates={}));var s=function(){function t(t){var e=this;this._hostWindow=window,this._connection=null,this._state=r.Connecting,this._sequence=0,this._receivers={},this.iframe=document.createElement("iframe"),t.sandboxAttrs.forEach((function(t){return e.iframe.sandbox.add(t)})),"allow"in this.iframe&&(this.iframe.allow=t.allowAttrs.join("; ")),this.iframe.frameBorder=t.getFrameBorder(),t.url?this.iframe.src=t.url:t.source?this.iframe.srcdoc=t.source:console.warn("url or source required to initialize Chatty host correctly"),this._appendTo=t.el,this._handlers=t.handlers,this._port=null,this._targetOrigin=t.targetOrigin,this._defaultTimeout=t.defaultTimeout}return Object.defineProperty(t.prototype,"connection",{get:function(){return this._connection},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this._state===r.Connected},enumerable:!0,configurable:!0}),t.prototype.connect=function(){return o(this,void 0,void 0,(function(){var e,n=this;return i(this,(function(s){return this._connection?[2,this._connection]:(e=function(){return o(n,void 0,void 0,(function(){var e=this;return i(this,(function(n){return[2,new Promise((function(n,s){var a=function(s){switch(t._debug("port received",s.data.action,s.data.data),s.data.action){case rr.ChattyClientMessages.Ack:e._state=r.Connected,n({send:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.sendMsg(nr.ChattyHostMessages.Message,{eventName:t,payload:r})},sendAndReceive:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return o(e,void 0,void 0,(function(){var e,n=this;return i(this,(function(o){return e=++this._sequence,this.sendMsg(nr.ChattyHostMessages.MessageWithResponse,{eventName:t,payload:r},e),[2,new Promise((function(t,r){var o;n._defaultTimeout>-1&&(o=setTimeout((function(){delete n._receivers[e],r(new Error("Timeout"))}),n._defaultTimeout)),n._receivers[e]={resolve:t,reject:r,timeoutId:o}}))]}))}))}});break;case rr.ChattyClientMessages.Message:e._handlers[s.data.data.eventName]&&e._handlers[s.data.data.eventName].forEach((function(t){return t.apply(e,s.data.data.payload)}));break;case rr.ChattyClientMessages.MessageWithResponse:var a=s.data.data,u=a.eventName,c=a.payload,f=a.sequence,l=[];e._handlers[u]&&(l=e._handlers[u].map((function(t){return t.apply(e,c)}))),Promise.all(l).then((function(t){e.sendMsg(nr.ChattyHostMessages.Response,{eventName:u,payload:t},f)})).catch((function(t){e.sendMsg(nr.ChattyHostMessages.ResponseError,{eventName:u,payload:t.toString()},f)}));break;case rr.ChattyClientMessages.Response:(h=e._receivers[s.data.data.sequence])&&(delete e._receivers[s.data.data.sequence],h.timeoutId&&clearTimeout(h.timeoutId),h.resolve(s.data.data.payload));break;case rr.ChattyClientMessages.ResponseError:var h;(h=e._receivers[s.data.data.sequence])&&(delete e._receivers[s.data.data.sequence],h.timeoutId&&clearTimeout(h.timeoutId),h.reject("string"==typeof s.data.data.payload?new Error(s.data.data.payload):s.data.data.payload))}};e._hostWindow.addEventListener("message",(function(n){if(e.isValidMsg(n)){if(t._debug("window received",n.data.action,n.data.data),n.data.action===rr.ChattyClientMessages.Syn){if(e._port){if(!(e._targetOrigin&&"*"===e._targetOrigin||e._targetOrigin===n.origin))return void t._debug("rejected new connection from",n.origin);t._debug("reconnecting to",n.origin),e._port.close()}e._port=n.ports[0],e._port.onmessage=a,e.sendMsg(nr.ChattyHostMessages.SynAck),e._state=r.SynAck}}else t._debug("window received invalid",n)}))}))]}))}))},this._appendTo.appendChild(this.iframe),[2,this._connection=e()])}))}))},t.prototype.sendMsg=function(e,r,o){void 0===r&&(r={});var i=o?{sequence:o}:{},s=n(n({},r),i);t._debug("sending",e,s),this._port.postMessage({action:e,data:s})},t.prototype.isValidMsg=function(t){return t.source===this.iframe.contentWindow&&(!this._targetOrigin||"*"===this._targetOrigin||this._targetOrigin===t.origin)},t._debug=pr("looker:chatty:host"),t}();e.ChattyHost=s})),br=function(){function t(t,e){this._url=t,this._source=e,this._appendTo=null,this._handlers={},this._sandboxAttrs=[],this._allowAttrs=[],this._frameBorder="0",this._targetOrigin=null,this._defaultTimeout=3e4}return Object.defineProperty(t.prototype,"el",{get:function(){return this._appendTo||document.body},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"handlers",{get:function(){return this._handlers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sandboxAttrs",{get:function(){return this._sandboxAttrs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowAttrs",{get:function(){return this._allowAttrs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"targetOrigin",{get:function(){return this._targetOrigin},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultTimeout",{get:function(){return this._defaultTimeout},enumerable:!0,configurable:!0}),t.prototype.appendTo=function(t){return this._appendTo=t,this},t.prototype.off=function(t,e){this._handlers[t]&&(this._handlers[t]=this._handlers[t].filter((function(t){return t!==e})))},t.prototype.on=function(t,e){return this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e),this},t.prototype.withDefaultTimeout=function(t){return this._defaultTimeout=t,this},t.prototype.getFrameBorder=function(){return this._frameBorder},t.prototype.frameBorder=function(t){return this._frameBorder=t,this},t.prototype.sandbox=function(t){return this.withSandboxAttribute(t),this},t.prototype.withSandboxAttribute=function(t){return this._sandboxAttrs.push(t),this},t.prototype.withAllowAttribute=function(t){return this._allowAttrs.push(t),this},t.prototype.withTargetOrigin=function(t){return this._targetOrigin=t,this},t.prototype.build=function(){return new vr.ChattyHost(this)},t}(),wr=br,_r=Object.defineProperty({ChattyHostBuilder:wr},"__esModule",{value:!0});mr.ChattyClientBuilder,_r.ChattyHostBuilder,dr.ChattyClient,vr.ChattyHost;var Er=function(){function t(){}return t.createHost=function(t){return new _r.ChattyHostBuilder(t)},t.createHostFromSource=function(t){return new _r.ChattyHostBuilder(void 0,t)},t.createClient=function(){return new mr.ChattyClientBuilder},t}();var xr=function(){this.__data__=[],this.size=0};var Sr=function(t,e){return t===e||t!=t&&e!=e};var Or=function(t,e){for(var r=t.length;r--;)if(Sr(t[r][0],e))return r;return-1},$r=Array.prototype.splice;var Ar=function(t){var e=this.__data__,r=Or(e,t);return!(r<0)&&(r==e.length-1?e.pop():$r.call(e,r,1),--this.size,!0)};var jr=function(t){var e=this.__data__,r=Or(e,t);return r<0?void 0:e[r][1]};var Nr=function(t){return Or(this.__data__,t)>-1};var Br=function(t,e){var r=this.__data__,n=Or(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Ir(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ir.prototype.clear=xr,Ir.prototype.delete=Ar,Ir.prototype.get=jr,Ir.prototype.has=Nr,Ir.prototype.set=Br;var Rr=Ir;var Tr=function(){this.__data__=new Rr,this.size=0};var Cr=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var Ur=function(t){return this.__data__.get(t)};var Pr=function(t){return this.__data__.has(t)},Mr="object"==typeof tr&&tr&&tr.Object===Object&&tr,kr="object"==typeof self&&self&&self.Object===Object&&self,Lr=Mr||kr||Function("return this")(),Dr=Lr.Symbol,Hr=Object.prototype,Fr=Hr.hasOwnProperty,qr=Hr.toString,Jr=Dr?Dr.toStringTag:void 0;var zr=function(t){var e=Fr.call(t,Jr),r=t[Jr];try{t[Jr]=void 0;var n=!0}catch(t){}var o=qr.call(t);return n&&(e?t[Jr]=r:delete t[Jr]),o},Vr=Object.prototype.toString;var Wr=function(t){return Vr.call(t)},Zr=Dr?Dr.toStringTag:void 0;var Yr=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Zr&&Zr in Object(t)?zr(t):Wr(t)};var Gr=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var Kr,Xr=function(t){if(!Gr(t))return!1;var e=Yr(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Qr=Lr["__core-js_shared__"],tn=(Kr=/[^.]+$/.exec(Qr&&Qr.keys&&Qr.keys.IE_PROTO||""))?"Symbol(src)_1."+Kr:"";var en=function(t){return!!tn&&tn in t},rn=Function.prototype.toString;var nn=function(t){if(null!=t){try{return rn.call(t)}catch(t){}try{return t+""}catch(t){}}return""},on=/^\[object .+?Constructor\]$/,sn=Function.prototype,an=Object.prototype,un=sn.toString,cn=an.hasOwnProperty,fn=RegExp("^"+un.call(cn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ln=function(t){return!(!Gr(t)||en(t))&&(Xr(t)?fn:on).test(nn(t))};var hn=function(t,e){return null==t?void 0:t[e]};var pn=function(t,e){var r=hn(t,e);return ln(r)?r:void 0},dn=pn(Lr,"Map"),gn=pn(Object,"create");var yn=function(){this.__data__=gn?gn(null):{},this.size=0};var mn=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},vn=Object.prototype.hasOwnProperty;var bn=function(t){var e=this.__data__;if(gn){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return vn.call(e,t)?e[t]:void 0},wn=Object.prototype.hasOwnProperty;var _n=function(t){var e=this.__data__;return gn?void 0!==e[t]:wn.call(e,t)};var En=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=gn&&void 0===e?"__lodash_hash_undefined__":e,this};function xn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xn.prototype.clear=yn,xn.prototype.delete=mn,xn.prototype.get=bn,xn.prototype.has=_n,xn.prototype.set=En;var Sn=xn;var On=function(){this.size=0,this.__data__={hash:new Sn,map:new(dn||Rr),string:new Sn}};var $n=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var An=function(t,e){var r=t.__data__;return $n(e)?r["string"==typeof e?"string":"hash"]:r.map};var jn=function(t){var e=An(this,t).delete(t);return this.size-=e?1:0,e};var Nn=function(t){return An(this,t).get(t)};var Bn=function(t){return An(this,t).has(t)};var In=function(t,e){var r=An(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function Rn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Rn.prototype.clear=On,Rn.prototype.delete=jn,Rn.prototype.get=Nn,Rn.prototype.has=Bn,Rn.prototype.set=In;var Tn=Rn;var Cn=function(t,e){var r=this.__data__;if(r instanceof Rr){var n=r.__data__;if(!dn||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Tn(n)}return r.set(t,e),this.size=r.size,this};function Un(t){var e=this.__data__=new Rr(t);this.size=e.size}Un.prototype.clear=Tr,Un.prototype.delete=Cr,Un.prototype.get=Ur,Un.prototype.has=Pr,Un.prototype.set=Cn;var Pn=Un;var Mn=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var kn=function(t){return this.__data__.has(t)};function Ln(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Tn;++e<r;)this.add(t[e])}Ln.prototype.add=Ln.prototype.push=Mn,Ln.prototype.has=kn;var Dn=Ln;var Hn=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var Fn=function(t,e){return t.has(e)};var qn=function(t,e,r,n,o,i){var s=1&r,a=t.length,u=e.length;if(a!=u&&!(s&&u>a))return!1;var c=i.get(t),f=i.get(e);if(c&&f)return c==e&&f==t;var l=-1,h=!0,p=2&r?new Dn:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var d=t[l],g=e[l];if(n)var y=s?n(g,d,l,e,t,i):n(d,g,l,t,e,i);if(void 0!==y){if(y)continue;h=!1;break}if(p){if(!Hn(e,(function(t,e){if(!Fn(p,e)&&(d===t||o(d,t,r,n,i)))return p.push(e)}))){h=!1;break}}else if(d!==g&&!o(d,g,r,n,i)){h=!1;break}}return i.delete(t),i.delete(e),h},Jn=Lr.Uint8Array;var zn=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var Vn=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},Wn=Dr?Dr.prototype:void 0,Zn=Wn?Wn.valueOf:void 0;var Yn=function(t,e,r,n,o,i,s){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Jn(t),new Jn(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Sr(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=zn;case"[object Set]":var u=1&n;if(a||(a=Vn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;n|=2,s.set(t,e);var f=qn(a(t),a(e),n,o,i,s);return s.delete(t),f;case"[object Symbol]":if(Zn)return Zn.call(t)==Zn.call(e)}return!1};var Gn=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Kn=Array.isArray;var Xn=function(t,e,r){var n=e(t);return Kn(t)?n:Gn(n,r(t))};var Qn=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var s=t[r];e(s,r,t)&&(i[o++]=s)}return i};var to=function(){return[]},eo=Object.prototype.propertyIsEnumerable,ro=Object.getOwnPropertySymbols,no=ro?function(t){return null==t?[]:(t=Object(t),Qn(ro(t),(function(e){return eo.call(t,e)})))}:to;var oo=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var io=function(t){return null!=t&&"object"==typeof t};var so=function(t){return io(t)&&"[object Arguments]"==Yr(t)},ao=Object.prototype,uo=ao.hasOwnProperty,co=ao.propertyIsEnumerable,fo=so(function(){return arguments}())?so:function(t){return io(t)&&uo.call(t,"callee")&&!co.call(t,"callee")},lo=fo;var ho=function(){return!1},po=er((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r?Lr.Buffer:void 0,i=(o?o.isBuffer:void 0)||ho;t.exports=i})),go=/^(?:0|[1-9]\d*)$/;var yo=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&go.test(t))&&t>-1&&t%1==0&&t<e};var mo=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},vo={};vo["[object Float32Array]"]=vo["[object Float64Array]"]=vo["[object Int8Array]"]=vo["[object Int16Array]"]=vo["[object Int32Array]"]=vo["[object Uint8Array]"]=vo["[object Uint8ClampedArray]"]=vo["[object Uint16Array]"]=vo["[object Uint32Array]"]=!0,vo["[object Arguments]"]=vo["[object Array]"]=vo["[object ArrayBuffer]"]=vo["[object Boolean]"]=vo["[object DataView]"]=vo["[object Date]"]=vo["[object Error]"]=vo["[object Function]"]=vo["[object Map]"]=vo["[object Number]"]=vo["[object Object]"]=vo["[object RegExp]"]=vo["[object Set]"]=vo["[object String]"]=vo["[object WeakMap]"]=!1;var bo=function(t){return io(t)&&mo(t.length)&&!!vo[Yr(t)]};var wo=function(t){return function(e){return t(e)}},_o=er((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,o=n&&n.exports===r&&Mr.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i})),Eo=_o&&_o.isTypedArray,xo=Eo?wo(Eo):bo,So=Object.prototype.hasOwnProperty;var Oo=function(t,e){var r=Kn(t),n=!r&&lo(t),o=!r&&!n&&po(t),i=!r&&!n&&!o&&xo(t),s=r||n||o||i,a=s?oo(t.length,String):[],u=a.length;for(var c in t)!e&&!So.call(t,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yo(c,u))||a.push(c);return a},$o=Object.prototype;var Ao=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$o)};var jo=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),No=Object.prototype.hasOwnProperty;var Bo=function(t){if(!Ao(t))return jo(t);var e=[];for(var r in Object(t))No.call(t,r)&&"constructor"!=r&&e.push(r);return e};var Io=function(t){return null!=t&&mo(t.length)&&!Xr(t)};var Ro=function(t){return Io(t)?Oo(t):Bo(t)};var To=function(t){return Xn(t,Ro,no)},Co=Object.prototype.hasOwnProperty;var Uo=function(t,e,r,n,o,i){var s=1&r,a=To(t),u=a.length;if(u!=To(e).length&&!s)return!1;for(var c=u;c--;){var f=a[c];if(!(s?f in e:Co.call(e,f)))return!1}var l=i.get(t),h=i.get(e);if(l&&h)return l==e&&h==t;var p=!0;i.set(t,e),i.set(e,t);for(var d=s;++c<u;){var g=t[f=a[c]],y=e[f];if(n)var m=s?n(y,g,f,e,t,i):n(g,y,f,t,e,i);if(!(void 0===m?g===y||o(g,y,r,n,i):m)){p=!1;break}d||(d="constructor"==f)}if(p&&!d){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(t),i.delete(e),p},Po=pn(Lr,"DataView"),Mo=pn(Lr,"Promise"),ko=pn(Lr,"Set"),Lo=pn(Lr,"WeakMap"),Do="[object Map]",Ho="[object Promise]",Fo="[object Set]",qo="[object WeakMap]",Jo="[object DataView]",zo=nn(Po),Vo=nn(dn),Wo=nn(Mo),Zo=nn(ko),Yo=nn(Lo),Go=Yr;(Po&&Go(new Po(new ArrayBuffer(1)))!=Jo||dn&&Go(new dn)!=Do||Mo&&Go(Mo.resolve())!=Ho||ko&&Go(new ko)!=Fo||Lo&&Go(new Lo)!=qo)&&(Go=function(t){var e=Yr(t),r="[object Object]"==e?t.constructor:void 0,n=r?nn(r):"";if(n)switch(n){case zo:return Jo;case Vo:return Do;case Wo:return Ho;case Zo:return Fo;case Yo:return qo}return e});var Ko=Go,Xo="[object Arguments]",Qo="[object Array]",ti="[object Object]",ei=Object.prototype.hasOwnProperty;var ri=function(t,e,r,n,o,i){var s=Kn(t),a=Kn(e),u=s?Qo:Ko(t),c=a?Qo:Ko(e),f=(u=u==Xo?ti:u)==ti,l=(c=c==Xo?ti:c)==ti,h=u==c;if(h&&po(t)){if(!po(e))return!1;s=!0,f=!1}if(h&&!f)return i||(i=new Pn),s||xo(t)?qn(t,e,r,n,o,i):Yn(t,e,u,r,n,o,i);if(!(1&r)){var p=f&&ei.call(t,"__wrapped__"),d=l&&ei.call(e,"__wrapped__");if(p||d){var g=p?t.value():t,y=d?e.value():e;return i||(i=new Pn),o(g,y,r,n,i)}}return!!h&&(i||(i=new Pn),Uo(t,e,r,n,o,i))};var ni=function t(e,r,n,o,i){return e===r||(null==e||null==r||!io(e)&&!io(r)?e!=e&&r!=r:ri(e,r,n,o,t,i))};var oi=function(t,e){return ni(t,e)},ii=Object.prototype.hasOwnProperty;var si=function(t){if(null==t)return!0;if(Io(t)&&(Kn(t)||"string"==typeof t||"function"==typeof t.splice||po(t)||xo(t)||lo(t)))return!t.length;var e=Ko(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Ao(t))return!Bo(t).length;for(var r in t)if(ii.call(t,r))return!1;return!0};let ai,ui;!function(t){t.DARK="dark",t.LIGHT="light"}(ai||(ai={})),function(t){t.FIXED="fixed",t.SCALE="scale"}(ui||(ui={}));const ci=t=>{const{background:e,baseUrl:r,autoRefresh:n,maxDataAge:o,width:i,height:s,theme:a,showAttribution:u,getUserToken:c}=t;if("string"!=typeof r||0===r.length)throw new Error("Base URL must be a valid URL");if(void 0!==e&&"string"!=typeof e)throw new Error("background must be a string if specified");if(void 0!==n&&"boolean"!=typeof n)throw new Error("autoRefresh must be a boolean if specified");if(void 0!==o&&"number"!=typeof o)throw new Error("maxDataAge must be a number if specified");if(void 0!==i&&!["number","string"].includes(typeof i))throw new Error("Width must be a string or number if specified");if(void 0!==s&&!["number","string"].includes(typeof s))throw new Error("Height must be a string or number if specified");if(void 0!==a&&"string"!=typeof a)throw new Error("Theme must be a string if specified");if(void 0!==u&&"boolean"!=typeof u)throw new Error("Attribution must be a boolean value if specified");if(void 0!==c&&"function"!=typeof c)throw new Error("getUserToken must be a function");return{background:e,baseUrl:r,autoRefresh:n,maxDataAge:o,width:i,height:s,theme:a,showAttribution:u,getUserToken:c}},fi=(t,e)=>[t.pathname,"/"===t.pathname.slice(-1)?"":"/",e].join(""),li=t=>"string"==typeof t?t:"number"==typeof t?`${t}px`:null;function hi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class pi{constructor(){hi(this,"iframe",void 0),hi(this,"connection",void 0),hi(this,"name",void 0),hi(this,"ERRORS",void 0),hi(this,"COLOUR",void 0),hi(this,"options",void 0)}async render(t){if(this.iframe)throw new Error(this.ERRORS.IFRAME);const e=this._configureEmbedRoot(function(t,e={},r=[]){const n=document.createElement(t);for(const[t,r]of Object.entries(e))"style"===t?Object.assign(n.style,e.style):n.setAttribute(t,r);for(const t of Array.isArray(r)?r:[r])n.append(t);return n}("div",{style:{position:"relative",overflow:"hidden",minHeight:Boolean(this.options.height)?0:"15px",width:li(this.options.width)||"100%",height:li(this.options.height)||"100%"}})),r=this._configureHost(Er.createHost(this.getEmbedUrl()).withSandboxAttribute("allow-scripts").withSandboxAttribute("allow-same-origin").withSandboxAttribute("allow-popups").withSandboxAttribute("allow-popups-to-escape-sandbox").appendTo(e)).build();for(r.iframe.setAttribute("aria-label",this.name),Object.assign(r.iframe.style,{position:"absolute",top:0,left:0,border:0,width:"100%",height:"100%"});t.firstChild;)t.removeChild(t.firstChild);t.appendChild(e),this.connection=await r.connect(),this.iframe=r.iframe,this._setBackground(this.options.background,this.options.theme),await this._retrieveAndSetToken(),await this._send("ready")}async isAutoRefresh(){const[t]=await this._send("get","autoRefresh");return"number"==typeof t||"boolean"==typeof t?Boolean(t):Promise.reject("unexpected response received from iframe")}async setAutoRefresh(t){if("boolean"!=typeof t)return Promise.reject("autoRefresh property value should be a boolean");await this._send("set","autoRefresh",t)}async getMaxDataAge(){const[t]=await this._send("get","maxDataAge");return"number"==typeof t?t:Promise.reject("unexpected response received from iframe")}async setMaxDataAge(t){if("number"!=typeof t)return Promise.reject("maxDataAge property value should be a number");await this._send("set","maxDataAge",t)}async setTheme(t){if("string"!=typeof t)return Promise.reject("theme property value should be a string");const e=Object.values(ai).includes(t)?t:ai.LIGHT;await this._send("set","theme",e),this._setBackground(this.options.background,e)}async getTheme(){const[t]=await this._send("get","theme");return"string"==typeof t?t:Promise.reject("unexpected response received from iframe")}_configureHost(t){return t.on("refreshToken",(()=>this._retrieveAndSetToken()))}_configureEmbedRoot(t){return t}_setBackground(t,e){this.iframe.style.backgroundColor=((t,e,r,n)=>"string"==typeof t&&t.length>0?t:"dark"===e?n:r)(t,e,this.COLOUR.LIGHT,this.COLOUR.DARK)}async _retrieveAndSetToken(){if(this.options.getUserToken){const t=await this.options.getUserToken();await this._send("set","token",t)}}_send(t,...e){return this.connection?this.connection.sendAndReceive(t,...e):Promise.reject(this.ERRORS.SEND)}}let di=Date.now();function gi(t){var e;return e=class extends t{constructor(...t){var e,r,n;super(...t),n={click:{}},(r="_eventHandlers")in(e=this)?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n}_handleEvent(t,e,r){const n=this._eventHandlers[t];for(const i of r)try{var o;null===(o=n[i])||void 0===o||o.handle(e)}catch(e){console.warn(`Error calling handler for event [${t}]: ${e}`)}}addEventListener(t,e,r){var n;const o=this._eventHandlers[t];if(!o)throw new Error(`Not supported event: ${t}`);const i={handle:e,options:{includes:null==r?void 0:r.includes}};if(null!==(n=i.options.includes)&&void 0!==n&&n.every((t=>si(t)))&&console.warn("Empty includes filters out all events. Event handler will never be called. Is this intended?"),!Object.keys(o).some((t=>oi(o[t],i)))){const e=(++di).toString(36);return o[e]=i,this._send("eventHandler",t,{handlerId:e,options:i.options})}return Promise.resolve()}removeEventListener(t,e,r){const n=this._eventHandlers[t];if(!n)throw new Error(`Not supported event: ${t}`);const o={handle:e,options:{includes:null==r?void 0:r.includes}},i=Object.keys(n).find((t=>oi(n[t],o)));return i?(delete n[i],this._send("eventHandler",t,{handlerId:i})):Promise.resolve()}},e}function yi(t){return class extends t{async refresh(){await this._send("refresh")}}}function mi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class vi extends pi{constructor(t){super(),mi(this,"name","Embedded Chart"),mi(this,"ERRORS",{SEND:"Chart has not been rendered. Ensure that you wait for the promise returned by `chart.render()` before trying to manipulate a chart.",IFRAME:"A chart can only be rendered into a container once"}),mi(this,"COLOUR",{LIGHT:"#FFFFFF",DARK:"#21313C"}),mi(this,"options",void 0),this.options=(t=>{if("object"!=typeof t||null===t)throw new Error("Options argument must be an object");const e=ci(t),{chartId:r,filter:n,refreshInterval:o}=t;if("string"!=typeof r||0===r.length)throw new Error("Chart ID must be specified");if(void 0!==n&&(!n||"object"!=typeof n))throw new Error("Filter must be an object if specified");if(void 0!==o&&"number"!=typeof o)throw new Error("refreshInterval interval must be a number if specified");return{...e,chartId:r,filter:n,refreshInterval:o}})(t)}getEmbedUrl(){return(t=>{try{const e=new URL(t.baseUrl);return e.pathname=fi(e,"embed/charts"),e.search=`id=${t.chartId}&sdk=2`,!1===t.autoRefresh?e.search+="&autorefresh=false":void 0===t.autoRefresh&&(e.search+=t.refreshInterval?`&autorefresh=${t.refreshInterval}`:""),void 0!==t.maxDataAge&&(e.search+=`&maxDataAge=${t.maxDataAge}`),t.filter&&(e.search+=`&filter=${encodeURIComponent(Ge.stringify(t.filter,{relaxed:!1}))}`),t.theme&&(e.search+=`&theme=${t.theme}`),!1===t.showAttribution&&(e.search+="&attribution=false"),e.toString()}catch(t){throw new Error("Base URL must be a valid URL")}})(this.options)}}class bi extends(yi(gi(vi))){async getRefreshInterval(){const[t]=await this._send("get","autorefresh");return console.warn("The 'getRefreshInterval' method is deprecated. Please use the 'autoRefresh' option with the 'maxDataAge' option to configure how often the chart refreshes."),"number"==typeof t?t:Promise.reject("unexpected response received from iframe")}async setRefreshInterval(t){if("number"!=typeof t)return Promise.reject("refreshInterval property value should be a number");console.warn("The 'setRefreshInterval' method is deprecated. Please use the 'autoRefresh' option with the 'maxDataAge' option to configure how often the chart refreshes."),await this._send("set","autorefresh",t)}async getFilter(){const[t]=await this._send("get","filter");return"object"==typeof t&&null!==t?t:Promise.reject("unexpected response received from iframe")}async setFilter(t){if("object"!=typeof t||null===t||Array.isArray(t))return Promise.reject("filter property value should be an object");await this._send("set","filter",Ge.stringify(t,{relaxed:!1}))}async getHighlight(){const[t]=await this._send("get","highlight");return"object"==typeof t&&null!==t?t:Promise.reject("unexpected response received from iframe")}async setHighlight(t){if("object"!=typeof t||null===t||Array.isArray(t))return Promise.reject("highlight property value should be an object");await this._send("set","highlight",Ge.stringify(t,{relaxed:!1}))}_configureHost(t){return super._configureHost(t).on("event",this._handleEvent.bind(this))}async getData(){const[t]=await this._send("get","data");return"object"==typeof t&&null!==t?t:Promise.reject("unexpected response received from iframe")}}class wi{constructor(t,e){this.chartId=t,this.dashboard=e}_send(t,...e){return this.dashboard._send(t,...e,this.chartId)}}class _i extends(yi(gi(wi))){}function Ei(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class xi extends pi{constructor(t){super(),Ei(this,"name","Embedded Dashboard"),Ei(this,"ERRORS",{SEND:"Dashboard has not been rendered. Ensure that you wait for the promise returned by `dashboard.render()` before trying to manipulate a dashboard.",IFRAME:"A dashboard can only be rendered into a container once"}),Ei(this,"COLOUR",{LIGHT:"#F1F5F4",DARK:"#12212C"}),Ei(this,"options",void 0),this.options=(t=>{if("object"!=typeof t||null===t)throw new Error("Options argument must be an object");const e=ci(t),{dashboardId:r,chartsBackground:n,widthMode:o,heightMode:i,showTitleAndDesc:s}=t;if("string"!=typeof r||0===r.length)throw new Error("dashboardId must be specified");if(void 0!==n&&"string"!=typeof n)throw new Error("chartsBackground must be a string if specified");if(void 0!==o&&"string"!=typeof o)throw new Error("widthMode must be a string if specified");if(void 0!==o&&o!==ui.FIXED&&o!==ui.SCALE)throw new Error(`widthMode must be "${ui.FIXED}" or "${ui.SCALE}"`);if(void 0!==i&&"string"!=typeof i)throw new Error("heightMode must be a string if specified");if(void 0!==i&&i!==ui.FIXED&&i!==ui.SCALE)throw new Error(`heightMode must be "${ui.FIXED}" or "${ui.SCALE}"`);if(void 0!==s&&"boolean"!=typeof s)throw new Error("showTitleAndDesc must be a boolean value if specified");return{...e,dashboardId:r,chartsBackground:n,widthMode:o,heightMode:i,showTitleAndDesc:s}})(t)}getEmbedUrl(){return(t=>{try{const e=new URL(t.baseUrl);return e.pathname=fi(e,"embed/dashboards"),e.search=`id=${t.dashboardId}&sdk=1`,!1===t.autoRefresh&&(e.search+="&autoRefresh=false"),void 0!==t.maxDataAge&&(e.search+=`&maxDataAge=${t.maxDataAge}`),!0===t.showTitleAndDesc&&(e.search+="&showTitleAndDesc=true"),t.widthMode&&(e.search+=`&scalingWidth=${t.widthMode}`),t.heightMode&&(e.search+=`&scalingHeight=${t.heightMode}`),t.theme&&(e.search+=`&theme=${t.theme}`),t.chartsBackground&&(e.search+=`&chartsBackground=${t.chartsBackground}`),!1===t.showAttribution&&(e.search+="&attribution=false"),e.toString()}catch(t){throw new Error("Base URL must be a valid URL")}})(this.options)}}class Si extends(yi(xi)){constructor(...t){super(...t),Ei(this,"charts",{})}async getChartsBackground(){const[t]=await this._send("get","chartsBackground");return"string"==typeof t?t:Promise.reject("unexpected response received from iframe")}async setChartsBackground(t){if("string"!=typeof t)return Promise.reject("chartsBackground property value should be a string");await this._send("set","chartsBackground",t)}async isShowAttribution(){const[t]=await this._send("get","attribution");return"boolean"==typeof t?Boolean(t):Promise.reject("unexpected response received from iframe")}async setShowAttribution(t){if("boolean"!=typeof t)return Promise.reject("showAttribution property value should be a boolean");await this._send("set","attribution",t)}async getWidthMode(){const[t]=await this._send("get","scalingWidth");return t===ui.FIXED||t===ui.SCALE?t:Promise.reject("unexpected response received from iframe")}async setWidthMode(t){if(!["fixed","scale"].includes(t))return Promise.reject('widthMode property value should be a string value of "fixed" or "scale"');await this._send("set","scalingWidth",t)}async getHeightMode(){const[t]=await this._send("get","scalingHeight");return"fixed"===t||"scale"===t?t:Promise.reject("unexpected response received from iframe")}async setHeightMode(t){if(!["fixed","scale"].includes(t))return Promise.reject('heightMode property value should be a string value of "fixed" or "scale"');await this._send("set","scalingHeight",t)}async getChart(t){if(!this.charts[t]){const[e]=await this._send("get","charts",[t]);if(!Array.isArray(e))return Promise.reject("unexpected response received from iframe");if(1!==e.length)return Promise.reject("Invalid chart id: "+t);this.charts[t]=new _i(t,this)}return this.charts[t]}async getAllCharts(){const[t]=await this._send("get","charts");if(!Array.isArray(t))return Promise.reject("unexpected response received from iframe");const e=[];return t.forEach((t=>{this.charts[t]||(this.charts[t]=new _i(t,this)),e.push(this.charts[t])})),e}_configureHost(t){return super._configureHost(t).on("event",((t,e,r)=>{const n=e.chartId;this.charts[n]._handleEvent(t,e,r)}))}}class Oi{constructor(t){var e,r,n;n=void 0,(r="defaultOptions")in(e=this)?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,this.defaultOptions=t}createChart(t){return new bi({...this.defaultOptions,...t})}createDashboard(t){return new Si({...this.defaultOptions,...t})}}function $i(t,e,r){const n=t.slice();return n[3]=e[r],n[4]=e,n[5]=r,n}function Ai(t){let e,r=t[4],n=t[5];const o=()=>t[1](e,r,n),i=()=>t[1](null,r,n);return{c(){e=E("div"),A(e,"class","col")},m(t,r){b(t,e,r),o()},p(e,s){r===(t=e)[4]&&n===t[5]||(i(),r=t[4],n=t[5],o())},d(t){t&&w(e),i()}}}function ji(t){let r,n=DR_CHART_IDS,o=[];for(let e=0;e<n.length;e+=1)o[e]=Ai($i(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();r=O()},m(t,e){for(let r=0;r<o.length;r+=1)o[r].m(t,e);b(t,r,e)},p(t,[e]){if(0&e){let i;for(n=DR_CHART_IDS,i=0;i<n.length;i+=1){const s=$i(t,n,i);o[i]?o[i].p(s,e):(o[i]=Ai(s),o[i].c(),o[i].m(r.parentNode,r))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},i:e,o:e,d(t){_(o,t),t&&w(r)}}}function Ni(t,e,r){let{startDate:n=new Date}=e;return k((async()=>{!async function(){const t=new Oi({baseUrl:DR_CHART_BASE_URL});for(const e of DR_CHART_IDS){const r=t.createChart({chartId:e.id,height:"300px",filter:{ts:{$gt:n}},maxDataAge:10,showAttribution:!1});await r.render(e.elm).catch((()=>console.log("Error while rendering chart")))}}()})),t.$$set=t=>{"startDate"in t&&r(0,n=t.startDate)},[n,function(t,e,r){F[t?"unshift":"push"]((()=>{e[r].elm=t}))}]}class Bi extends gt{constructor(t){super(),dt(this,t,Ni,ji,a,{startDate:0})}}function Ii(t){let r,n;return{c(){r=x(Ci),n=E("i"),A(n,"class","bi bi-lightning-fill svelte-16t251g")},m(t,e){b(t,r,e),b(t,n,e)},p:e,d(t){t&&w(r),t&&w(n)}}}function Ri(t){let r;return{c(){r=x(Ui)},m(t,e){b(t,r,e)},p:e,d(t){t&&w(r)}}}function Ti(t){let r,n,o;function i(t,e){return t[0]?Ri:Ii}let s=i(t),a=s(t);return{c(){r=E("button"),a.c(),A(r,"type","button"),A(r,"class","btn btn-primary"),r.disabled=t[0]},m(e,i){b(e,r,i),a.m(r,null),n||(o=$(r,"click",t[1]),n=!0)},p(t,[e]){s===(s=i(t))&&a?a.p(t,e):(a.d(1),a=s(t),a&&(a.c(),a.m(r,null))),1&e&&(r.disabled=t[0])},i:e,o:e,d(t){t&&w(r),a.d(),n=!1,o()}}}const Ci="Test failover",Ui="Initiated regional failover...";function Pi(t,e,r){let n;f(t,bt,(t=>r(0,n=t)));let{appServerEndpoint:o}=e;return t.$$set=t=>{"appServerEndpoint"in t&&r(2,o=t.appServerEndpoint)},[n,async function(){try{(await fetch(o+"/testFailover",{method:"POST"})).ok&&(bt.set(!0),setTimeout((()=>{bt.set(!1)}),6e5))}catch(t){console.log(`Test failover failed: ${t}`)}},o]}class Mi extends gt{constructor(t){super(),dt(this,t,Pi,Ti,a,{appServerEndpoint:2})}}function ki(t){let e,r,n,o,s,a,u,c,f,l,h,p,d,g,m,v,_,x,O,j,B,I,R,T,C;return n=new Mi({props:{appServerEndpoint:t[3]}}),{c(){e=E("div"),r=E("div"),ft(n.$$.fragment),o=S(),s=E("div"),a=E("input"),u=S(),c=E("label"),c.textContent="Retryable reads",f=S(),l=E("div"),h=E("input"),p=S(),d=E("label"),d.textContent="Retryable writes",g=S(),m=E("div"),v=E("select"),_=E("option"),_.textContent="primary",x=E("option"),x.textContent="primaryPreferred",O=E("option"),O.textContent="secondary",j=E("option"),j.textContent="secondaryPreferred",B=S(),I=E("label"),I.textContent="Read preference",A(r,"class","actions svelte-1gzwlrb"),A(a,"class","form-check-input svelte-1gzwlrb"),A(a,"type","checkbox"),a.__value="",a.value=a.__value,A(c,"class","form-check-label"),A(c,"for","flexCheckChecked"),A(s,"class","form-check"),A(h,"class","form-check-input svelte-1gzwlrb"),A(h,"type","checkbox"),h.__value="",h.value=h.__value,A(d,"class","form-check-label"),A(d,"for","flexCheckChecked"),A(l,"class","form-check"),_.__value="primary",_.value=_.__value,_.selected=!0,x.__value="primaryPreferred",x.value=x.__value,O.__value="secondary",O.value=O.__value,j.__value="secondaryPreferred",j.value=j.__value,A(v,"class","form-select"),A(v,"id","read-preference"),A(v,"aria-label","Read preference"),void 0===t[2]&&W((()=>t[6].call(v))),A(I,"for","read-preference"),A(m,"class","form-floating svelte-1gzwlrb"),A(e,"class","controls svelte-1gzwlrb"),A(e,"role","group"),A(e,"aria-label","simulate failure menu")},m(i,w){b(i,e,w),y(e,r),lt(n,r,null),y(e,o),y(e,s),y(s,a),a.checked=t[0],y(s,u),y(s,c),y(e,f),y(e,l),y(l,h),h.checked=t[1],y(l,p),y(l,d),y(e,g),y(e,m),y(m,v),y(v,_),y(v,x),y(v,O),y(v,j),N(v,t[2]),y(m,B),y(m,I),R=!0,T||(C=[$(a,"change",t[4]),$(h,"change",t[5]),$(v,"change",t[6])],T=!0)},p(t,[e]){const r={};8&e&&(r.appServerEndpoint=t[3]),n.$set(r),1&e&&(a.checked=t[0]),2&e&&(h.checked=t[1]),4&e&&N(v,t[2])},i(t){R||(it(n.$$.fragment,t),R=!0)},o(t){st(n.$$.fragment,t),R=!1},d(t){t&&w(e),ht(n),T=!1,i(C)}}}function Li(t,e,r){let{retryReads:n=!0}=e,{retryWrites:o=!0}=e,{readPreference:i="primary"}=e,{appServerEndpoint:s}=e;return t.$$set=t=>{"retryReads"in t&&r(0,n=t.retryReads),"retryWrites"in t&&r(1,o=t.retryWrites),"readPreference"in t&&r(2,i=t.readPreference),"appServerEndpoint"in t&&r(3,s=t.appServerEndpoint)},[n,o,i,s,function(){n=this.checked,r(0,n)},function(){o=this.checked,r(1,o)},function(){i=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),r(2,i)}]}class Di extends gt{constructor(t){super(),dt(this,t,Li,ki,a,{retryReads:0,retryWrites:1,readPreference:2,appServerEndpoint:3})}}function Hi(t,{delay:e=0,duration:n=400,easing:o=r}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:t=>"opacity: "+t*i}}function Fi(t){let e,r,n;return{c(){e=E("p"),e.textContent="Elected as new primary!"},m(t,r){b(t,e,r),n=!0},i(t){n||(r&&r.end(1),n=!0)},o(t){r=ut(e,Hi,{delay:1e4,duration:5e3}),n=!1},d(t){t&&w(e),t&&r&&r.end()}}}function qi(t){let e,r,n,o,i,s,a,u,f,l,h,p,d=t[5]&&t[0]&&Fi();return{c(){e=E("div"),r=E("figure"),n=E("img"),s=S(),a=E("figcaption"),u=x(t[2]),f=x(" — "),l=x(t[3]),h=S(),d&&d.c(),c(n.src,o="img/"+Ji(t[2]))||A(n,"src",o),A(n,"class","figure-img svelte-1pvt7x"),A(n,"alt",i=t[2]+" node"),A(a,"class","figure-caption"),A(r,"class","figure svelte-1pvt7x"),B(r,"blink","Primary"===t[2]&&t[4]),A(e,"class","col-3 text-center")},m(o,i){b(o,e,i),y(e,r),y(r,n),t[6](n),y(r,s),y(r,a),y(a,u),y(a,f),y(a,l),y(e,h),d&&d.m(e,null),p=!0},p(t,[s]){(!p||4&s&&!c(n.src,o="img/"+Ji(t[2])))&&A(n,"src",o),(!p||4&s&&i!==(i=t[2]+" node"))&&A(n,"alt",i),(!p||4&s)&&j(u,t[2]),(!p||8&s)&&j(l,t[3]),20&s&&B(r,"blink","Primary"===t[2]&&t[4]),t[5]&&t[0]?d?33&s&&it(d,1):(d=Fi(),d.c(),it(d,1),d.m(e,null)):d&&(nt(),st(d,1,1,(()=>{d=null})),ot())},i(t){p||(it(d),p=!0)},o(t){st(d),p=!1},d(r){r&&w(e),t[6](null),d&&d.d()}}}function Ji(t){if(t)switch(t.toLowerCase()){case"primary":return"primary-active.png";case"secondary":return"secondary-active.png"}return"unknown.png"}function zi(t,e,r){let n,o;f(t,bt,(t=>r(4,n=t))),f(t,vt,(t=>r(5,o=t)));let{type:i}=e,{region:s="REGION"}=e,{isNewPrimary:a=!1}=e,{iconElm:u}=e;return t.$$set=t=>{"type"in t&&r(2,i=t.type),"region"in t&&r(3,s=t.region),"isNewPrimary"in t&&r(0,a=t.isNewPrimary),"iconElm"in t&&r(1,u=t.iconElm)},t.$$.update=()=>{1&t.$$.dirty&&a&&setTimeout((()=>{r(0,a=!1)}),100)},[a,u,i,s,n,o,function(t){F[t?"unshift":"push"]((()=>{u=t,r(1,u)}))}]}class Vi extends gt{constructor(t){super(),dt(this,t,zi,qi,a,{type:2,region:3,isNewPrimary:0,iconElm:1})}}function Wi(t,e,r){const n=t.slice();return n[9]=e[r],n[10]=e,n[11]=r,n}function Zi(t){let e,r,n;function o(e){t[2](e,t[9])}let i={type:t[9].type,region:t[9].region,isNewPrimary:t[9].isNewPrimary};return void 0!==t[9].iconElm&&(i.iconElm=t[9].iconElm),e=new Vi({props:i}),F.push((()=>ct(e,"iconElm",o))),{c(){ft(e.$$.fragment)},m(t,r){lt(e,t,r),n=!0},p(n,o){t=n;const i={};1&o&&(i.type=t[9].type),1&o&&(i.region=t[9].region),1&o&&(i.isNewPrimary=t[9].isNewPrimary),!r&&1&o&&(r=!0,i.iconElm=t[9].iconElm,Z((()=>r=!1))),e.$set(i)},i(t){n||(it(e.$$.fragment,t),n=!0)},o(t){st(e.$$.fragment,t),n=!1},d(t){ht(e,t)}}}function Yi(t){let e,r,n=t[0],o=[];for(let e=0;e<n.length;e+=1)o[e]=Zi(Wi(t,n,e));const i=t=>st(o[t],1,1,(()=>{o[t]=null}));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=O()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);b(t,e,n),r=!0},p(t,[r]){if(1&r){let s;for(n=t[0],s=0;s<n.length;s+=1){const i=Wi(t,n,s);o[s]?(o[s].p(i,r),it(o[s],1)):(o[s]=Zi(i),o[s].c(),it(o[s],1),o[s].m(e.parentNode,e))}for(nt(),s=n.length;s<o.length;s+=1)i(s);ot()}},i(t){if(!r){for(let t=0;t<n.length;t+=1)it(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)st(o[t]);r=!1},d(t){_(o,t),t&&w(e)}}}const Gi="/rsConfig";function Ki(t,e,r){let n,{appServerEndpoint:o}=e,{nodes:i=[]}=e,s=!1;async function a(){try{const t=await fetch(o+"/rsStatus"),e=await t.json();if(e&&e.members){const t=e.members.find((t=>"PRIMARY"===t.stateStr));if(t&&t.name){const e=i.findIndex((e=>e.host===t.name));if(-1!==e&&"Primary"!==i[e].type){const t=i[e].type;i.forEach(((t,r)=>{r!==e&&(t.type="Secondary",t.isNewPrimary=!1,t.connectedToApp=!1)})),r(0,i[e].type="Primary",i),r(0,i[e].connectedToApp=!0,i),"Secondary"===t&&(bt.set(!1),r(0,i[e].isNewPrimary=!0,i))}}else console.log("Error! Could not determine primary")}else console.log("Error! Could not determine primary");!function(){if(!s)for(let t=1;t<i.length;t++)i[t-1].iconElm&&i[t].iconElm&&(new LeaderLine(i[t-1].iconElm,i[t].iconElm,{color:"grey",startPlug:"behind",endPlug:"behind"}),s=!0)}()}catch(t){console.log(`Fetching output of rs.status() command failed: ${t}`)}}return k((async()=>{!async function(){try{const t=await fetch(o+Gi),e=await t.json();if(e&&e.members&&e.members.length>0)for(const t of e.members)0!==t.priority&&(t.tags&&t.tags.region?r(0,i=[...i,{host:t.host,region:t.tags.region,connectedToApp:!1}]):r(0,i=[...i,{host:t.host,connectedToApp:!1}]));a()}catch(t){console.log(`Fetching cluster config failed: ${t}`)}}()})),D((()=>{clearInterval(n)})),vt.subscribe((t=>{t?n=setInterval(a,1e3):clearInterval(n)})),L((async()=>{})),t.$$set=t=>{"appServerEndpoint"in t&&r(1,o=t.appServerEndpoint),"nodes"in t&&r(0,i=t.nodes)},[i,o,function(e,n){t.$$.not_equal(n.iconElm,e)&&(n.iconElm=e,r(0,i))}]}class Xi extends gt{constructor(t){super(),dt(this,t,Ki,Yi,a,{appServerEndpoint:1,nodes:0})}}function Qi(t,e,r){const n=t.slice();return n[4]=e[r],n}function ts(t){let e,r,n,o,i,s,a,u,c,f=Os(t[4].created)+"",l=t[4].eventTypeName+"";return{c(){e=E("tr"),r=E("td"),n=E("span"),o=x(f),i=x(":"),s=S(),a=E("td"),u=x(l),c=S(),A(n,"class","text-muted"),A(a,"class","text-end")},m(t,f){b(t,e,f),y(e,r),y(r,n),y(n,o),y(n,i),y(e,s),y(e,a),y(a,u),y(e,c)},p(t,e){1&e&&f!==(f=Os(t[4].created)+"")&&j(o,f),1&e&&l!==(l=t[4].eventTypeName+"")&&j(u,l)},d(t){t&&w(e)}}}function es(t){let r,n,o,i,s,a=t[0].reverse(),u=[];for(let e=0;e<a.length;e+=1)u[e]=ts(Qi(t,a,e));return{c(){r=E("div"),n=E("div"),o=E("p"),o.textContent="Cluster event log",i=S(),s=E("table");for(let t=0;t<u.length;t+=1)u[t].c();A(o,"class","h5"),A(s,"class","text-start float-end"),A(n,"id","cluster-events"),A(n,"class","text-end svelte-5mk11n"),A(r,"class","col")},m(t,e){b(t,r,e),y(r,n),y(n,o),y(n,i),y(n,s);for(let t=0;t<u.length;t+=1)u[t].m(s,null)},p(t,[e]){if(1&e){let r;for(a=t[0].reverse(),r=0;r<a.length;r+=1){const n=Qi(t,a,r);u[r]?u[r].p(n,e):(u[r]=ts(n),u[r].c(),u[r].m(s,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=a.length}},i:e,o:e,d(t){t&&w(r),_(u,t)}}}function rs(t,e,r){let n,{appServerEndpoint:o}=e,i=[];async function s(){try{const t=o+"/getClusterEvents?minDate="+function(){const t=new Date;return t.setSeconds(t.getSeconds()-10),t.toISOString()}(),e=await fetch(t,{method:"GET"}),n=await e.json();e.ok&&n&&n.results&&r(0,i=i.concat(n.results))}catch(t){console.log(`Get Atlas Cluster events failed: ${t}`)}}return k((()=>{})),D((()=>{clearInterval(n)})),vt.subscribe((t=>{t?n=setInterval(s,1e4):clearInterval(n)})),t.$$set=t=>{"appServerEndpoint"in t&&r(1,o=t.appServerEndpoint)},[i,o]}class ns extends gt{constructor(t){super(),dt(this,t,rs,es,a,{appServerEndpoint:1})}}function os(t){let r,n,o,i,s,a;return{c(){r=E("button"),n=x(t[0]),o=E("i"),A(o,"class",i="bi "+t[1]+" svelte-1v82big"),A(r,"type","button"),A(r,"class","btn btn-primary svelte-1v82big")},m(e,i){b(e,r,i),y(r,n),y(r,o),s||(a=$(r,"click",t[2]),s=!0)},p(t,[e]){1&e&&j(n,t[0]),2&e&&i!==(i="bi "+t[1]+" svelte-1v82big")&&A(o,"class",i)},i:e,o:e,d(t){t&&w(r),s=!1,a()}}}const is="/stop";function ss(t,e,r){let n,{appServerEndpoint:o}=e,{retryReads:i}=e,{retryWrites:s}=e,{readPreference:a}=e,u="Start",c="bi-play-fill";async function f(){try{const t=await fetch(o+"/continue"),e=await t.json();t.ok&&e&&e.success?console.log("Send keep running signal"):console.log(`Error! Got invalid response: ${e.msg}`)}catch(t){console.log(`Error while sending continue signal to appserver: ${t}`)}}return D((()=>{clearInterval(n)})),t.$$set=t=>{"appServerEndpoint"in t&&r(3,o=t.appServerEndpoint),"retryReads"in t&&r(4,i=t.retryReads),"retryWrites"in t&&r(5,s=t.retryWrites),"readPreference"in t&&r(6,a=t.readPreference)},[u,c,function(){vt.update((t=>(t?(clearInterval(n),async function(){try{const t=await fetch(o+is),e=await t.json();t.ok&&e&&e.success?console.log("Stopping"):console.log(`Error! Got invalid response: ${e.msg}`)}catch(t){console.log(`Error while stopping appserver: ${t}`)}}()):(!async function(){try{const t=`${o}/start?retryReads=${i}&retryWrites=${s}&readPreference=${a}`,e=await fetch(t),r=await e.json();e.ok&&r&&r.success?console.log(`Started: ${r.msg}`):console.log(`Error! Got invalid response: ${r.msg}`)}catch(t){console.log(`Error while starting appserver: ${t}`)}}(),n=setInterval(f,5e3)),r(0,u=(t=!t)?"Stop":"Start"),r(1,c=t?"bi-stop-fill":"bi-play-fill"),t)))},o,i,s,a]}class as extends gt{constructor(t){super(),dt(this,t,ss,os,a,{appServerEndpoint:3,retryReads:4,retryWrites:5,readPreference:6})}}function us(t){let e,r,n=t[0].avg&&cs(t),o=t[0].max&&fs(t);return{c(){n&&n.c(),e=S(),o&&o.c(),r=O()},m(t,i){n&&n.m(t,i),b(t,e,i),o&&o.m(t,i),b(t,r,i)},p(t,i){t[0].avg?n?n.p(t,i):(n=cs(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),t[0].max?o?o.p(t,i):(o=fs(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(t){n&&n.d(t),t&&w(e),o&&o.d(t),t&&w(r)}}}function cs(t){let e,r,n,o,i,s,a=parseFloat(t[0].avg).toFixed(2)+"";return{c(){e=E("div"),r=E("p"),r.textContent="Average latency:",n=S(),o=E("p"),i=x(a),s=x(" ms"),A(r,"class","svelte-1i86akd"),A(o,"class","h5 svelte-1i86akd"),A(e,"class","col col-lg-2 svelte-1i86akd")},m(t,a){b(t,e,a),y(e,r),y(e,n),y(e,o),y(o,i),y(o,s)},p(t,e){1&e&&a!==(a=parseFloat(t[0].avg).toFixed(2)+"")&&j(i,a)},d(t){t&&w(e)}}}function fs(t){let e,r,n,o,i,s,a=t[0].max+"";return{c(){e=E("div"),r=E("p"),r.textContent="Max latency:",n=S(),o=E("p"),i=x(a),s=x(" ms"),A(r,"class","svelte-1i86akd"),A(o,"class","h5 svelte-1i86akd"),A(e,"class","col col-lg-2 svelte-1i86akd")},m(t,a){b(t,e,a),y(e,r),y(e,n),y(e,o),y(o,i),y(o,s)},p(t,e){1&e&&a!==(a=t[0].max+"")&&j(i,a)},d(t){t&&w(e)}}}function ls(t){let r,n=t[0]&&us(t);return{c(){n&&n.c(),r=O()},m(t,e){n&&n.m(t,e),b(t,r,e)},p(t,[e]){t[0]?n?n.p(t,e):(n=us(t),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:e,o:e,d(t){n&&n.d(t),t&&w(r)}}}function hs(t,e,r){let n,{appServerEndpoint:o}=e,{startDate:i}=e,s={};async function a(){try{const t=await fetch(o+"/getStats?minDate="+i.getTime());r(0,s=await t.json())}catch(t){console.log(`Error while fetching stats: ${t}`)}}return k((()=>{})),D((()=>{clearInterval(n)})),vt.subscribe((t=>{t?n=setInterval(a,1e3):clearInterval(n)})),t.$$set=t=>{"appServerEndpoint"in t&&r(1,o=t.appServerEndpoint),"startDate"in t&&r(2,i=t.startDate)},[s,o,i]}class ps extends gt{constructor(t){super(),dt(this,t,hs,ls,a,{appServerEndpoint:1,startDate:2})}}function ds(t,e,r){const n=t.slice();return n[14]=e[r],n}function gs(t,e,r){const n=t.slice();return n[14]=e[r],n}function ys(t){let e,r;return e=new jt({props:{region:t[14].region,mongoNodes:t[1]}}),{c(){ft(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};1&r&&(n.region=t[14].region),2&r&&(n.mongoNodes=t[1]),e.$set(n)},i(t){r||(it(e.$$.fragment,t),r=!0)},o(t){st(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function ms(t){let e,r,n=t[14].endpoint&&t[14].region&&ys(t);return{c(){n&&n.c(),e=O()},m(t,o){n&&n.m(t,o),b(t,e,o),r=!0},p(t,r){t[14].endpoint&&t[14].region?n?(n.p(t,r),1&r&&it(n,1)):(n=ys(t),n.c(),it(n,1),n.m(e.parentNode,e)):n&&(nt(),st(n,1,1,(()=>{n=null})),ot())},i(t){r||(it(n),r=!0)},o(t){st(n),r=!1},d(t){n&&n.d(t),t&&w(e)}}}function vs(t){let e,r;return e=new ps({props:{appServerEndpoint:t[7],startDate:t[6]}}),{c(){ft(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};64&r&&(n.startDate=t[6]),e.$set(n)},i(t){r||(it(e.$$.fragment,t),r=!0)},o(t){st(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function bs(t){let e,r;return e=new Bi({props:{startDate:t[6]}}),{c(){ft(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};64&r&&(n.startDate=t[6]),e.$set(n)},i(t){r||(it(e.$$.fragment,t),r=!0)},o(t){st(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function ws(t){let e,r;return e=new Ot({props:{appServerEndpoint:t[14].endpoint,region:t[14].region}}),{c(){ft(e.$$.fragment)},m(t,n){lt(e,t,n),r=!0},p(t,r){const n={};1&r&&(n.appServerEndpoint=t[14].endpoint),1&r&&(n.region=t[14].region),e.$set(n)},i(t){r||(it(e.$$.fragment,t),r=!0)},o(t){st(e.$$.fragment,t),r=!1},d(t){ht(e,t)}}}function _s(t){let e,r,n=t[5]&&t[14].endpoint&&ws(t);return{c(){n&&n.c(),e=O()},m(t,o){n&&n.m(t,o),b(t,e,o),r=!0},p(t,r){t[5]&&t[14].endpoint?n?(n.p(t,r),33&r&&it(n,1)):(n=ws(t),n.c(),it(n,1),n.m(e.parentNode,e)):n&&(nt(),st(n,1,1,(()=>{n=null})),ot())},i(t){r||(it(n),r=!0)},o(t){st(n),r=!1},d(t){n&&n.d(t),t&&w(e)}}}function Es(t){let e,r,n,o,i,s,a,u,c,f,l,h,p,d,g,m,v,x,O,$,j,N,B,I,R,T,C,U,P,M,k;function L(e){t[8](e)}function D(e){t[9](e)}function H(e){t[10](e)}a=new as({props:{appServerEndpoint:t[7],retryReads:t[2],retryWrites:t[3],readPreference:t[4]}});let q={appServerEndpoint:t[7]};void 0!==t[2]&&(q.retryReads=t[2]),void 0!==t[3]&&(q.retryWrites=t[3]),void 0!==t[4]&&(q.readPreference=t[4]),l=new Di({props:q}),F.push((()=>ct(l,"retryReads",L))),F.push((()=>ct(l,"retryWrites",D))),F.push((()=>ct(l,"readPreference",H)));let J=t[0],z=[];for(let e=0;e<J.length;e+=1)z[e]=ms(gs(t,J,e));const V=t=>st(z[t],1,1,(()=>{z[t]=null}));function W(e){t[11](e)}let Y={appServerEndpoint:t[7]};void 0!==t[1]&&(Y.nodes=t[1]),$=new Xi({props:Y}),F.push((()=>ct($,"nodes",W))),I=new ns({props:{appServerEndpoint:t[7]}});let G=t[5]&&vs(t),K=t[5]&&bs(t),X=t[0],Q=[];for(let e=0;e<X.length;e+=1)Q[e]=_s(ds(t,X,e));const tt=t=>st(Q[t],1,1,(()=>{Q[t]=null}));return{c(){e=E("main"),r=E("div"),n=E("div"),o=E("div"),i=E("h1"),i.textContent="Disaster Simulator®",s=S(),ft(a.$$.fragment),u=S(),c=E("div"),f=E("div"),ft(l.$$.fragment),g=S(),m=E("div"),v=E("div");for(let t=0;t<z.length;t+=1)z[t].c();x=S(),O=E("div"),ft($.$$.fragment),N=S(),B=E("div"),ft(I.$$.fragment),R=S(),T=E("div"),G&&G.c(),C=S(),U=E("div"),K&&K.c(),P=S(),M=E("div");for(let t=0;t<Q.length;t+=1)Q[t].c();A(o,"class","col text-center"),A(n,"class","row header-row svelte-xx1ngb"),A(f,"class","col-2"),A(v,"class","row justify-content-center appserver-row svelte-xx1ngb"),A(O,"class","row justify-content-center"),A(m,"class","col-8 topology"),A(B,"class","col-2"),A(c,"class","row"),A(T,"class","row justify-content-md-center"),A(U,"class","row chart-row"),A(M,"class","row"),A(r,"class","container"),A(e,"class","svelte-xx1ngb")},m(t,h){b(t,e,h),y(e,r),y(r,n),y(n,o),y(o,i),y(o,s),lt(a,o,null),y(r,u),y(r,c),y(c,f),lt(l,f,null),y(c,g),y(c,m),y(m,v);for(let t=0;t<z.length;t+=1)z[t].m(v,null);y(m,x),y(m,O),lt($,O,null),y(c,N),y(c,B),lt(I,B,null),y(r,R),y(r,T),G&&G.m(T,null),y(r,C),y(r,U),K&&K.m(U,null),y(r,P),y(r,M);for(let t=0;t<Q.length;t+=1)Q[t].m(M,null);k=!0},p(t,[e]){const r={};4&e&&(r.retryReads=t[2]),8&e&&(r.retryWrites=t[3]),16&e&&(r.readPreference=t[4]),a.$set(r);const n={};if(!h&&4&e&&(h=!0,n.retryReads=t[2],Z((()=>h=!1))),!p&&8&e&&(p=!0,n.retryWrites=t[3],Z((()=>p=!1))),!d&&16&e&&(d=!0,n.readPreference=t[4],Z((()=>d=!1))),l.$set(n),3&e){let r;for(J=t[0],r=0;r<J.length;r+=1){const n=gs(t,J,r);z[r]?(z[r].p(n,e),it(z[r],1)):(z[r]=ms(n),z[r].c(),it(z[r],1),z[r].m(v,null))}for(nt(),r=J.length;r<z.length;r+=1)V(r);ot()}const o={};if(!j&&2&e&&(j=!0,o.nodes=t[1],Z((()=>j=!1))),$.$set(o),t[5]?G?(G.p(t,e),32&e&&it(G,1)):(G=vs(t),G.c(),it(G,1),G.m(T,null)):G&&(nt(),st(G,1,1,(()=>{G=null})),ot()),t[5]?K?(K.p(t,e),32&e&&it(K,1)):(K=bs(t),K.c(),it(K,1),K.m(U,null)):K&&(nt(),st(K,1,1,(()=>{K=null})),ot()),33&e){let r;for(X=t[0],r=0;r<X.length;r+=1){const n=ds(t,X,r);Q[r]?(Q[r].p(n,e),it(Q[r],1)):(Q[r]=_s(n),Q[r].c(),it(Q[r],1),Q[r].m(M,null))}for(nt(),r=X.length;r<Q.length;r+=1)tt(r);ot()}},i(t){if(!k){it(a.$$.fragment,t),it(l.$$.fragment,t);for(let t=0;t<J.length;t+=1)it(z[t]);it($.$$.fragment,t),it(I.$$.fragment,t),it(G),it(K);for(let t=0;t<X.length;t+=1)it(Q[t]);k=!0}},o(t){st(a.$$.fragment,t),st(l.$$.fragment,t),z=z.filter(Boolean);for(let t=0;t<z.length;t+=1)st(z[t]);st($.$$.fragment,t),st(I.$$.fragment,t),st(G),st(K),Q=Q.filter(Boolean);for(let t=0;t<Q.length;t+=1)st(Q[t]);k=!1},d(t){t&&w(e),ht(a),ht(l),_(z,t),ht($),ht(I),G&&G.d(),K&&K.d(),_(Q,t)}}}function xs(t,e,r){const n="/region";let o,i,s,a,u,c=[],f=DR_APP_HOSTS[0],l=[];return k((()=>{!async function(){const t=[];for(let e of DR_APP_HOSTS)try{const r=await fetch(e+n),o=await r.text();t.push({region:o,endpoint:e})}catch(t){console.log(`Fetching app region failed: ${t}`)}r(0,c=t)}()})),vt.subscribe((t=>{r(5,a=t),t&&r(6,u=new Date)})),[c,l,o,i,s,a,u,f,function(t){o=t,r(2,o)},function(t){i=t,r(3,i)},function(t){s=t,r(4,s)},function(t){l=t,r(1,l)}]}const Ss=new class extends gt{constructor(t){super(),dt(this,t,xs,Es,a,{})}}({target:document.body,props:{}});function Os(t){return new Date(t).toLocaleString("en-US",{hour:"2-digit",hour12:!1,minute:"2-digit",second:"2-digit"})}return t.default=Ss,t.getTimestamp=Os,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
//# sourceMappingURL=bundle.js.map
